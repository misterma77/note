<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/note/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/note/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/note/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/note/images/logo.svg" color="#222">

<link rel="stylesheet" href="/note/css/main.css">


<link rel="stylesheet" href="/note/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/note/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="javascript.note">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="javascript.note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>javascript.note</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/note/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">javascript.note</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/note/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/note/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/Buffer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/Buffer/" class="post-title-link" itemprop="url">Buffer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a><a href=""></a>Buffer</h2><p>buffer是数据的缓冲区，是内置的一个类，不是模块</p>
<blockquote>
<p><strong>buffer的创建</strong><br>node6.0之前的方法： <code>new Buffer()</code><br>现在的方法：Buffer.alloc(参数) 参数为内容大小，单位为b</p>
</blockquote>
<p>buffer会把数据(不限) 转换成二进制， 然后以十六进制的方式展示出来</p>
<blockquote>
<p><code>from()</code> 每个字转换为三组十六进制的数据<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200322123146691.png#pic_center" alt="在这里插入图片描述"><br>输出结果：<br><img src="https://img-blog.csdnimg.cn/20200322123154470.png#pic_center" alt="在这里插入图片描述"><br>如果要将这些十六进制的数据转换回去，需要在每组数据之前添加<code>0x</code>，用作标识十六进制数据<br>代码：<br><img src="https://img-blog.csdnimg.cn/202003222026364.png#pic_center" alt="在这里插入图片描述">输出结果：<br><img src="https://img-blog.csdnimg.cn/20200322202647912.png#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<p><code>string_decoder</code> class类<br>StringDecoder 固定名称<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200322205714764.png#pic_center" alt="在这里插入图片描述">输出结果：<br><img src="https://img-blog.csdnimg.cn/20200322205728631.png#pic_center" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/CSS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/CSS/" class="post-title-link" itemprop="url">CSS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a><a href=""></a>CSS</h2><p>(Cascading Style Sheets) 用于渲染HTML元素标签的样式.<br>引入方式：</p>
<blockquote>
<p>1.<strong>行间样式</strong>：优先级最高<br>代码：<img src="https://img-blog.csdnimg.cn/20200117184134363.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200117184152908.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>2.<strong>内联样式</strong>：优先级第二<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200117184543648.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200117184558940.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>3.<strong>外部样式</strong>：优先级最低：<br><code>&lt;link&gt;</code>：引入外部资源，包括css，网页小图标<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200117185318738.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200117185341785.png" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200117185348962.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>&lt;link&gt;</code>标签，单标签，只能存在与<code>&lt;head&gt;</code>标签，主要用于引入外部资源</p>
</blockquote>
<blockquote>
<p>属性：<a href="https://www.runoob.com/tags/tag-link.html" target="_blank" rel="noopener">菜鸟教程-<code>&lt;link&gt;</code>标签</a><br>1.href：定义被链接文档的位置</p>
</blockquote>
<blockquote>
<p>2.rel：定义当前文档与被链接文档之间的关系<br>属性值：<a href="https://www.runoob.com/tags/att-link-rel.html" target="_blank" rel="noopener">rel属性值</a><br>icon：网页小图标<br>stylesheet：默认。要导入的样式表的 URL</p>
</blockquote>
<blockquote>
<p>3.target：定义在何处加载被链接文档</p>
</blockquote>
<blockquote>
<p>4.type：规定被链接文档的 MIME（媒体类型） 类型</p>
</blockquote>
<h3 id="important"><a href="#important" class="headerlink" title="!important"></a><a href=""></a>!important</h3><p>优先级最高，但是仅作用于一行</p>
<blockquote>
<p>代码：<img src="https://img-blog.csdnimg.cn/20200118145757331.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118145916497.png" alt="在这里插入图片描述"><br>代码：<img src="https://img-blog.csdnimg.cn/20200118150007911.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/202001181501039.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="css常用属性"><a href="#css常用属性" class="headerlink" title="css常用属性"></a><a href=""></a>css常用属性</h2><blockquote>
<p><code>width：100px;</code>——宽。单位为px<br><code>height：100px;</code>——高。单位为px<br><code>border：1px solid red;</code>——边框。符合属性<br>共有三个属性，边框宽，边框类型(solid(实线),dashed(虚线),dotted(点线))，边框颜色<br>代码：<img src="https://img-blog.csdnimg.cn/20200118161143693.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118161201645.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>background</code>:背景。复合属性<br><code>background-color：red;</code> ——背景色<br><code>background-image:url(路径);</code>——背景图<br><code>background-size：100% 100%;</code>——图片宽与高<br><code>background-repeat：repeat-x(水平铺满) / repeat-y(垂直铺满) / no-repeat(不铺满);</code><br>——图片平铺。默认为全铺满<br><code>background-position：水平位置 垂直位置;</code>——背景图的位置<br>形式：1.垂直(top，center，bottom);水平(left,center,right) 2.px 3. %(大小%参考标签自身大小，移动%参考图片自身大小)</p>
<p><code>background-attachment：scroll(图随页面一同滚动) / fiexd(图片固定不动)；</code></p>
</blockquote>
<blockquote>
<p><code>font-size：20px/2em;</code>——字体大小。单位px(像素)/em(默认字体大小的几倍)<br><code>color：red;</code>——字体颜色。<br>代码：<img src="https://img-blog.csdnimg.cn/20200118161610346.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118161634297.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>border-radius：50%;</code>——边框切圆。可用px和%<br><code>line-height:10px;</code>——行高，用来垂直居中，单位px<br><code>text-align:left/center/right;</code>——水平对齐方式<br>代码：<img src="https://img-blog.csdnimg.cn/20200118162019942.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118162031375.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>vertical-align(垂直对齐方式):top/center/bottom;</code><br>——适用于表格单元格中对象及图片，对块级元素不起作用</p>
</blockquote>
<blockquote>
<p><code>font-family:楷体;</code>——字体，如果有多个字体，需要用”,”隔开<br>代码：<img src="https://img-blog.csdnimg.cn/20200118154541501.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118154558308.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>font-style(文字倾斜):</code><br><code>normal(正常)/oblique(偏斜体)/italic(斜体);</code><br>代码：<img src="https://img-blog.csdnimg.cn/20200118162616318.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118162627441.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>font-weight(文字加粗):</code><br><code>normal(正常)/bold(比正常粗)/bolder(比bold粗)/lighter(比正常细)</code><br>代码：<img src="https://img-blog.csdnimg.cn/2020011816283526.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118162844681.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>text-transform（英文字母大小写）:</code><br><code>capitalize(首字母大写)/uppercase(全部大写)/lowercase(全部小写);</code><br>代码：<img src="https://img-blog.csdnimg.cn/20200118163119178.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118163129425.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>text-decoration(文字装饰):</code><br><code>none(正常显示,可用来去除超链接下划线)underline(下划线)line-throungh(删除线)overline(加顶线)</code><br>代码：<img src="https://img-blog.csdnimg.cn/20200118191026285.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/2020011819103879.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>text-indent(段落首行缩进):10px/10em(首行缩进几个字的距离);</code><br>代码：<img src="https://img-blog.csdnimg.cn/20200118191351193.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118191409416.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>word-spacing(单词/词语间距):10px;</code><br><code>letter-spacing(字母/文字间距):10px;</code><br>代码：<img src="https://img-blog.csdnimg.cn/20200118192215185.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200118192229300.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p><code>text-align-last(属性规定如何对齐文本的最后一行) : auto(默认值。最后一行被调整，并向左对齐) / left / center / right / start / end / justify(两端对齐);</code><br>代码测试：<a href="https://www.runoob.com/try/playit.php?fplaycss_text-align-last&prevalauto" target="_blank" rel="noopener">代码测试</a></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/CSS%E9%80%89%E6%8B%A9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/CSS%E9%80%89%E6%8B%A9%E5%99%A8/" class="post-title-link" itemprop="url">CSS选择器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>CSS选择器使用基本流程：<br>1.制作所需要的选择器，并在其中写入样式<br>2.将选择器绑定到指定的html标签上</p>
<h3 id="通用选择器"><a href="#通用选择器" class="headerlink" title="通用选择器"></a><a href=""></a>通用选择器</h3><blockquote>
<p>书写格式：*{ }<br>其优先级是选择器中最低的，它可以修改整个页面，所有标签样式，包括body，html<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200119190841858.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200119190857338.png" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a><a href=""></a>标签选择器</h3><blockquote>
<p>用标签名来定义，将当前页面所有与名字相同的标签都绑定上样式<br>优先级低于class选择器<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200119191823572.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200119191908555.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="class选择器"><a href="#class选择器" class="headerlink" title="class选择器"></a><a href=""></a>class选择器</h3><blockquote>
<p>class选择器用” . “来标识自身<br>自定义名称（可以用数字，字母，下划线，但是不能以数字开头）<br>可以给多个标签使用，可以给指定的标签绑定，优先级高于标签选择器<br>代码：<img src="https://img-blog.csdnimg.cn/20200119192126466.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200119192133529.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="id选择器"><a href="#id选择器" class="headerlink" title="id选择器"></a><a href=""></a>id选择器</h3><blockquote>
<p>id选择器用” # “来标识自身，命名规则与class选择器相同<br>优先级高于class选择器<br>不具有重用性，具有唯一性，如果多个标签使用，会造成不可预知的错误<br>禁止重复使用同一个id</p>
</blockquote>
<h3 id="群组选择器"><a href="#群组选择器" class="headerlink" title="群组选择器"></a><a href=""></a>群组选择器</h3><blockquote>
<p>只能用于大批量的样式，如果需要给个别的标签写样式，请使用class或id选择器<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200119192756338.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200119192809871.png" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="子代选择器"><a href="#子代选择器" class="headerlink" title="子代选择器"></a><a href=""></a>子代选择器</h3><blockquote>
<p>语法：父级&gt;子级{  样式  }<br>对指定父级下指定的子级进行修改<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200119193435222.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200119193446952.png" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="后代选择器"><a href="#后代选择器" class="headerlink" title="后代选择器"></a><a href=""></a>后代选择器</h3><blockquote>
<p>语法:父级 空格 子级 { }  <code>父级 子级{ }</code><br>对指定父级下的所有元素进行操作<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200119194355503.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200119194357771.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="交叉选择器"><a href="#交叉选择器" class="headerlink" title="交叉选择器"></a><a href=""></a>交叉选择器</h3><p>需要同时满足两个条件</p>
<blockquote>
<p>div.box选择的是标签是div，class名为box的元素<br>或者说是class名为box的div标签<br>交叉选择器中没有空格<br>代码：<img src="https://img-blog.csdnimg.cn/20200120112819654.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200120112844552.png" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="鼠标伪类hover"><a href="#鼠标伪类hover" class="headerlink" title="鼠标伪类hover"></a><a href=""></a>鼠标伪类hover</h2><p>效果：在鼠标移入该元素时，触发指定效果，移出时回到初始样式<br>语法：<code>XXX:hover{ }</code> 冒号前是触发者，冒号之后是显示者<br>使用hover时，子代、后代选择器写在hover之后<code>XXX:hover&gt;XX{ }</code><br>代码：<img src="https://img-blog.csdnimg.cn/20200120113627229.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：鼠标移入前<br><img src="https://img-blog.csdnimg.cn/20200120113653573.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>鼠标移入后<br><img src="https://img-blog.csdnimg.cn/20200120113708748.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="transition过渡"><a href="#transition过渡" class="headerlink" title="transition过渡"></a><a href=""></a>transition过渡</h2><p>transition是复合属性<br>transition：值1 值2；<br>值1：需要修改的样式<br>值2：改变所用的时间，单位为s</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/DOM/" class="post-title-link" itemprop="url">DOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是DOM？"><a href="#什么是DOM？" class="headerlink" title="什么是DOM？"></a><a href=""></a>什么是DOM？</h2><p>DOM 是 W3C（万维网联盟）的标准。</p>
<p>DOM 定义了访问 HTML 和 XML 文档的标准：</p>
<blockquote>
<p>“W3C 文档对象模型 （DOM） 是中立于平台和语言的接口，它允许程序和脚本动态地访问和更新文档的内容、结构和样式。”</p>
</blockquote>
<p>W3C DOM 标准被分为 3 个不同的部分：</p>
<blockquote>
<p>核心 DOM - 针对任何结构化文档的标准模型<br>XML DOM - 针对 XML 文档的标准模型<br>HTML DOM - 针对 HTML 文档的标准模型<br>什么是 HTML DOM？</p>
</blockquote>
<p>HTML DOM 是：</p>
<blockquote>
<p>HTML 的标准对象模型<br>HTML 的标准编程接口<br>W3C 标准</p>
</blockquote>
<p>HTML DOM 定义了所有 HTML 元素的对象和属性，以及访问它们的方法。</p>
<p>换言之，HTML DOM 是关于如何获取、修改、添加或删除 HTML 元素的标准。</p>
<h2 id="DOM基础方法"><a href="#DOM基础方法" class="headerlink" title="DOM基础方法"></a><a href=""></a>DOM基础方法</h2><h6 id="父节点的获取方法"><a href="#父节点的获取方法" class="headerlink" title="父节点的获取方法"></a><a href=""></a>父节点的获取方法</h6><blockquote>
<p>1.<code>XX.parentNode</code> 获取该节点的父节点<br>2.<code>XX.parentElement</code> 获取该节点的父元素节点<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130212555301.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130212603261.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h6 id="子节点的获取方法"><a href="#子节点的获取方法" class="headerlink" title="子节点的获取方法"></a><a href=""></a>子节点的获取方法</h6><blockquote>
<p><strong>1.<code>XX.childNodes</code> 获取该节点的所有子节点</strong><br>代码：该方法会将元素之间的空格也算作子节点<br><img src="https://img-blog.csdnimg.cn/2020013022072617.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130220734771.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>2.<strong><code>XX.childElementCount</code> 获取并返回该节点的子元素节点的数量</strong><br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130221017431.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/2020013022102622.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>3.<strong><code>XX.children</code> 获取该节点的所有子元素节点</strong><br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130221255970.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130221258281.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>4.<strong><code>XX.firstElementChild</code> 获取第一个子元素节点</strong><br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130221458513.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130221518935.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>5.<strong><code>XX.firstChild</code> 获取第一个子节点</strong><br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130221619479.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/2020013022163470.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>6.<strong><code>XX.lastChild</code> 获取最后一个子节点</strong><br>7.<strong><code>XX.lastElementChild</code> 获取最后一个子元素节点</strong></p>
</blockquote>
<h6 id="兄弟节点的获取方式"><a href="#兄弟节点的获取方式" class="headerlink" title="兄弟节点的获取方式"></a><a href=""></a>兄弟节点的获取方式</h6><blockquote>
<p>1.<code>XX.nextElementSibling</code> 获取该节点的下一个兄弟元素节点<br>2.<code>XX.nextSibling</code> 获取该节点的下一个兄弟节点<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130221834714.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130221846187.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>3.<code>XX.previousElementSibling</code> 获取该节点的上一个兄弟元素节点<br>4.<code>XX.previousSibling</code> 获取该节点的上一个兄弟节点</p>
</blockquote>
<h6 id="创建元素和添加元素"><a href="#创建元素和添加元素" class="headerlink" title="创建元素和添加元素"></a><a href=""></a>创建元素和添加元素</h6><p>创建完成的元素，不在Dom树中，需要主动添加<br><code>document.crearElement( )</code> 创建元素<br>1.<code>目标.appendChild(内容)</code> 添加到目标里的最后一位<br>2.<code>父节点.insertBefore(新节点，已有节点)</code> 添加到已有节点之前</p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/2020013022214275.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130222144291.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h6 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a><a href=""></a>删除元素</h6><p>1.指定目标的父元素.removeChild(指定目标)<br>2.指定目标.remove()</p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200130222405705.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130222415288.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h6 id="替换元素"><a href="#替换元素" class="headerlink" title="替换元素"></a><a href=""></a>替换元素</h6><p>替换目标的父元素.replaceChild(新的元素,被替换的元素)</p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200130222655757.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130222705385.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h6 id="克隆元素"><a href="#克隆元素" class="headerlink" title="克隆元素"></a><a href=""></a>克隆元素</h6><p><code>需要克隆的目标.cloneNode()</code> 克隆节点 该方法会将克隆体返回</p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200130223005125.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130223013746.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>XX.nodeName 返回节点名称<br>XX.nodeValue 返回节点属性<br>XX.nodeType 返回节点类型<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200130223251379.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/20200130223302160.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/Date%E5%AF%B9%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/Date%E5%AF%B9%E8%B1%A1/" class="post-title-link" itemprop="url">Date对象</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>创建一个Date对象，用来处理时间和日期<br>使用关键字new配合，生成一个Date对象<br>Date对象是用来处理时间和日期，内置了一系列获取和设置日期和时间的方法</p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128151722514.png" alt="在这里插入图片描述"><br>显示时间：<br><img src="https://img-blog.csdnimg.cn/20200128151732836.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<p>tolocalString() 把时间对象转换为字符串<br>getTime() 返回1970年1月1日距今的毫秒数</p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128152544355.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128152559242.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="设置set"><a href="#设置set" class="headerlink" title="设置set"></a><a href=""></a>设置set</h2><p><strong>1.<code>setTime()</code>     以毫秒数设置Date对象</strong></p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128153509107.png" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128153518306.png" alt="在这里插入图片描述"></p>
</blockquote>
<p><strong>2.<code>setFullYear()</code>   设置年，月，日</strong></p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128153651621.png" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128153654337.png" alt="在这里插入图片描述"></p>
</blockquote>
<p><strong>3.<code>setMonth()</code>   设置月，日(毫秒)</strong></p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128153806445.png" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128153814509.png" alt="在这里插入图片描述"></p>
</blockquote>
<p><strong>4.<code>setHours()</code>   设置时，分，秒</strong></p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128153943693.png" alt="在这里插入图片描述"><br>显示：<br><img src="https://img-blog.csdnimg.cn/20200128153950921.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<p><strong>5.<code>setMinutes()</code>   设置分，秒</strong></p>
<blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128154133656.png" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128154151341.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<p><strong>6.<code>setSeconds()</code> 设置秒</strong><br>代码：<br><img src="https://img-blog.csdnimg.cn/20200128154334567.png" alt="在这里插入图片描述"><br>显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128154343753.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="获取get"><a href="#获取get" class="headerlink" title="获取get"></a><a href=""></a>获取get</h2><p><strong>1.getFullYearr()  获取年份<br>2.getMonth()   获取月份<br>3.getDate()     获取一个月中的第几天<br>4.getDay()    获取一周中的第几天<br>5.getHours()   获取小时<br>6.getMinutes()   获取分钟<br>7.getSeconds() 获取秒数</strong><br>代码:<br><img src="https://img-blog.csdnimg.cn/20200128154938396.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128154948936.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="计算活了多久"><a href="#计算活了多久" class="headerlink" title="计算活了多久"></a><a href=""></a>计算活了多久</h2><blockquote>
<p>代码：<br><img src="https://img-blog.csdnimg.cn/20200128160717566.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">显示效果：<br><img src="https://img-blog.csdnimg.cn/20200128160725279.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a><a href=""></a>定时器</h2><p><code>setInterval(参数1,参数2)</code> 用来重复执行某一功能<br>参数1：执行的具体功能，自定义<br>参数2：每次执行的间隔时间，自定义，单位为毫秒</p>
<h2 id="一次性定时器"><a href="#一次性定时器" class="headerlink" title="一次性定时器"></a><a href=""></a>一次性定时器</h2><p><code>setTimeout(参数1,参数2)</code> 只执行一次的定时器<br>参数1：执行的具体任务<br>参数2：间隔多久执行，(延迟)</p>
<h2 id="清除定时器"><a href="#清除定时器" class="headerlink" title="清除定时器"></a><a href=""></a>清除定时器</h2><p><code>clearInterval()</code><br>需要有记录器(变量自增),来记录运行次数，到达指定条件时触发<br>定义定时器时，要用一个变量来储存定时器<br><code>clearInterval</code>的括号中放储存定时器的变量名,清除之后，将这个变量置空(null)<br>代码:<br><img src="https://img-blog.csdnimg.cn/2020012816030448.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/03/1.git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/03/1.git/" class="post-title-link" itemprop="url">1.git</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-03 10:08:39" itemprop="dateCreated datePublished" datetime="2020-06-03T10:08:39+08:00">2020-06-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><p>[TOC]</p>
<h2 id="什么是版本控制？"><a href="#什么是版本控制？" class="headerlink" title="什么是版本控制？"></a>什么是版本控制？</h2><p>版本控制是指对软件开发过程中各种程序代码、说明文档等文件的变更进行管理，它将追踪文件变化，记录文件的变更时间、变更内容、甚至变更执行人进行记录，同时对每一个阶段性变更（不仅仅只是一个文件的变化）添加版本编号，方便将来进行查阅特定阶段的变更信息，甚至是回滚</p>
<h2 id="什么是-Git？"><a href="#什么是-Git？" class="headerlink" title="什么是 Git？"></a>什么是 Git？</h2><h3 id="人工版本控制器"><a href="#人工版本控制器" class="headerlink" title="人工版本控制器"></a>人工版本控制器</h3><p>通过人工的复制行为来保存项目的不同阶段的内容，添加适当的一些描述文字加以区分</p>
<ul>
<li>繁琐、容易出错</li>
<li>产生大量重复（冗余）数据</li>
</ul>
<h3 id="版本控制工具"><a href="#版本控制工具" class="headerlink" title="版本控制工具"></a>版本控制工具</h3><p>通过程序完成上述人工版本控制行为</p>
<ul>
<li>方便且功能强大</li>
<li>只记录不同版本之间变化的部分</li>
</ul>
<h3 id="常见版本控制工具"><a href="#常见版本控制工具" class="headerlink" title="常见版本控制工具"></a>常见版本控制工具</h3><ul>
<li>CVS</li>
<li>SVN</li>
<li>Git</li>
<li>……</li>
</ul>
<h2 id="怎么工作的？"><a href="#怎么工作的？" class="headerlink" title="怎么工作的？"></a>怎么工作的？</h2><p>首先，我们得先了解两个重要概念</p>
<ul>
<li>状态</li>
<li>区域</li>
</ul>
<h3 id="git-文件生命周期"><a href="#git-文件生命周期" class="headerlink" title="git 文件生命周期"></a>git 文件生命周期</h3><p><img src=".%5Cassets%5Clifecycle.png" alt="lifecycle"></p>
<h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><p>同时，git 又提供了三种（也可以说是四种）不同的记录状态</p>
<ul>
<li>已修改（modified）</li>
<li>已暂存（staged）</li>
<li>已提交（committed）</li>
</ul>
<p>有一个特殊的状态</p>
<ul>
<li>未追踪（Untracked）</li>
</ul>
<h3 id="区域"><a href="#区域" class="headerlink" title="区域"></a>区域</h3><p>git 提供了三个不同的工作区，用来存放不同的内容</p>
<ul>
<li>工作目录</li>
<li>暂存区域</li>
<li>Git 仓库</li>
</ul>
<p><img src=".%5Cassets%5Careas.png" alt="areas"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><a href="https://git-scm.com/" target="_blank" rel="noopener">https://git-scm.com/</a></p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>当安装完 Git 应该做的第一件事就是设置你的用户名称与邮件地址。 这样做很重要，因为每一个 Git 的提交都会使用这些信息，并且它会写入到你的每一次提交中，不可更改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name <span class="string">"你的姓名"</span></span><br><span class="line">git config user.email <span class="string">"你的邮箱"</span></span><br></pre></td></tr></table></figure>

<h3 id="–-global"><a href="#–-global" class="headerlink" title="– global"></a>– global</h3><p>通过 <code>--global</code> 选项可以设置全局配置信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"你的姓名"</span></span><br><span class="line">git config --global user.email <span class="string">"你的邮箱"</span></span><br></pre></td></tr></table></figure>

<h3 id="检查配置"><a href="#检查配置" class="headerlink" title="检查配置"></a>检查配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打印所有config</span></span><br><span class="line">git config --list</span><br><span class="line"><span class="comment"># 打印指定config</span></span><br><span class="line">git config user.name</span><br></pre></td></tr></table></figure>



<h2 id="创建仓库-repository"><a href="#创建仓库-repository" class="headerlink" title="创建仓库 - repository"></a>创建仓库 - repository</h2><p>进入希望纳入 git 版本控制的项目目录，使用 <code>git init</code> 初始化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<p>该命令将创建一个名为 <code>.git</code> 的子目录，这个子目录含有你初始化的 Git 仓库中所有的必须文件，这个目录也是上面我们说的三个区域之一，这个目录也是 Git 保存数据记录的地方，非常重要，如非必要，不要轻易改动</p>
<h2 id="工作流与基本操作"><a href="#工作流与基本操作" class="headerlink" title="工作流与基本操作"></a>工作流与基本操作</h2><p>当一个项目被 Git 初始化以后，只是表示我们希望通过 Git 来管理当前的这个项目文件的不同时期版本记录，但是这个时候项目中已存在的文件，或者以后新增的文件都是没有进入版本控制管理的，它们是 <code>未追踪（Untracked）</code> 的状态</p>
<h2 id="查看工作区的文件状态"><a href="#查看工作区的文件状态" class="headerlink" title="查看工作区的文件状态"></a>查看工作区的文件状态</h2><p><code>git status</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>

<p>查看工作区中的文件状态</p>
<h3 id="乱码"><a href="#乱码" class="headerlink" title="乱码"></a>乱码</h3><h4 id="git-status-显示乱码"><a href="#git-status-显示乱码" class="headerlink" title="git status 显示乱码"></a>git status 显示乱码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="终端乱码"><a href="#终端乱码" class="headerlink" title="终端乱码"></a>终端乱码</h4><p>菜单 -&gt; 设置 -&gt; 文本 -&gt; 本地 / 编码</p>
<p>或修改配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[gui]  </span><br><span class="line">    encoding &#x3D; utf-8  </span><br><span class="line">    # 代码库统一使用utf-8  </span><br><span class="line">[i18n]  </span><br><span class="line">    commitencoding &#x3D; utf-8  </span><br><span class="line">    # log编码</span><br><span class="line">[svn]  </span><br><span class="line">    pathnameencoding &#x3D; utf-8  </span><br><span class="line">    # 支持中文路径</span><br><span class="line">[core]</span><br><span class="line">    quotepath &#x3D; false </span><br><span class="line">    # status引用路径不再是八进制（反过来说就是允许显示中文了）</span><br></pre></td></tr></table></figure>



<h2 id="添加工作区文件到暂存区"><a href="#添加工作区文件到暂存区" class="headerlink" title="添加工作区文件到暂存区"></a>添加工作区文件到暂存区</h2><p><code>git add</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git add 1.txt</span><br><span class="line"><span class="comment"># 添加多个文件</span></span><br><span class="line">git add 2.txt 3.txt</span><br><span class="line"><span class="comment"># 添加整个目录</span></span><br><span class="line">git add ./a</span><br><span class="line"><span class="comment"># 添加多个目录</span></span><br><span class="line">git add ./b ./c</span><br><span class="line"><span class="comment"># 添加所有文件</span></span><br><span class="line">git add .</span><br></pre></td></tr></table></figure>

<h3 id="创建版本"><a href="#创建版本" class="headerlink" title="创建版本"></a>创建版本</h3><p><code>git commit</code></p>
<p>将暂存区里的改动给提交到本地 git 仓库，也就是为这次工作（一般会把某个具有特定意义的工作作为一个版本，它可以是多个文件的变化）</p>
<ul>
<li>每次提交同时会生成一个 40 位的哈希值，作为该次提交版本的唯一 id</li>
</ul>
<h4 id="提交备注"><a href="#提交备注" class="headerlink" title="提交备注"></a>提交备注</h4><p>每次提交都需要填写备注信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit</span><br><span class="line"><span class="comment"># 会调用默认（或自定义）的文本编辑器</span></span><br></pre></td></tr></table></figure>

<h4 id="修改默认编辑器"><a href="#修改默认编辑器" class="headerlink" title="修改默认编辑器"></a>修改默认编辑器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git config core.editor notepad</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 vscode 编辑器 - mac</span></span><br><span class="line"><span class="comment"># 通过 vim 打开环境变量配置文件</span></span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"><span class="comment"># 添加环境变量</span></span><br><span class="line"><span class="built_in">export</span> PATH=/Applications/Visual\ Studio\ Code.app/Contents/Resources/app/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="comment"># 保存退出</span></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br><span class="line"><span class="comment"># 测试：在终端中直接通过命令 code 调用 vscode</span></span><br><span class="line">git config --global core.editor <span class="string">"code --wait"</span></span><br></pre></td></tr></table></figure>

<h4 id="单行备注"><a href="#单行备注" class="headerlink" title="单行备注"></a>单行备注</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m 备注信息</span><br></pre></td></tr></table></figure>



<h2 id="查看提交日志"><a href="#查看提交日志" class="headerlink" title="查看提交日志"></a>查看提交日志</h2><p><code>git log</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 完整格式</span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line">// 简要格式（单行）</span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br></pre></td></tr></table></figure>



<h2 id="修复提交"><a href="#修复提交" class="headerlink" title="修复提交"></a>修复提交</h2><p><code>git commit --amend</code></p>
<p>修复（替换上一次）提交，在不增加一个新的提交版本的情况下将新修改的代码追加到前一次的提交中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend -m 提交</span><br></pre></td></tr></table></figure>



<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p><code>git rm</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从 git 仓库与工作区中删除指定文件</span></span><br><span class="line">git rm 文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只删除 git 仓库中的文件</span></span><br><span class="line">git rm --cached 文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># rm 以后，需要 commit 这次操作，否则 rm 将保留在暂存区</span></span><br><span class="line">git commit -m 修正</span><br></pre></td></tr></table></figure>



<h3 id="撤销重置"><a href="#撤销重置" class="headerlink" title="撤销重置"></a>撤销重置</h3><p><code>git reset</code></p>
<h4 id="从暂存区中撤销到工作区"><a href="#从暂存区中撤销到工作区" class="headerlink" title="从暂存区中撤销到工作区"></a>从暂存区中撤销到工作区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 从暂存区中撤销一个指定文件</span><br><span class="line">git reset HEAD 文件名称</span><br><span class="line">// 从暂存区中国年撤销所有文件</span><br><span class="line">git reset HEAD .</span><br></pre></td></tr></table></figure>

<h4 id="该命令既可以用于回退版本"><a href="#该命令既可以用于回退版本" class="headerlink" title="该命令既可以用于回退版本"></a>该命令既可以用于回退版本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 回退到指定的 commitID 版本</span></span><br><span class="line">git reset --hard commitID</span><br></pre></td></tr></table></figure>



<h2 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 比较 工作区和暂存区</span></span><br><span class="line">git diff 文件 </span><br><span class="line"><span class="comment"># 比较 暂存区和仓库</span></span><br><span class="line">git diff --cached [commitId] 文件</span><br><span class="line"><span class="comment"># 比较 工作区和仓库</span></span><br><span class="line">git diff commitId filename</span><br><span class="line"><span class="comment"># 比较 仓库不同版本</span></span><br><span class="line">git diff commitId1 commitId2</span><br></pre></td></tr></table></figure>



<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>我们的开发就像是游戏的任务，默认是在主线（master）上进行开发的。许多时候，还有各种支线任务，git 支持我们创建分支来进行项目开发</p>
<h3 id="查看分支"><a href="#查看分支" class="headerlink" title="查看分支"></a>查看分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure>

<h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch 分支名称</span><br></pre></td></tr></table></figure>

<h3 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout 分支名称</span><br><span class="line"><span class="comment"># 也可以使用 checkout -b 来新建分支</span></span><br><span class="line">git checkout -b 分支名称</span><br></pre></td></tr></table></figure>

<h3 id="分支合并"><a href="#分支合并" class="headerlink" title="分支合并"></a>分支合并</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># B 合并到 A，需要切换到 A 分支</span></span><br><span class="line">git merge 被合并分支</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看已经合并的分支</span></span><br><span class="line">git branch --merged</span><br><span class="line"><span class="comment"># 查看未合并的分支</span></span><br><span class="line">git branch --no-merged</span><br></pre></td></tr></table></figure>

<h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果分支为未合并状态，则不允许删除</span></span><br><span class="line">git branch -d 分支名称</span><br><span class="line"><span class="comment"># 强制删除</span></span><br><span class="line">git branch -D 分支名称</span><br></pre></td></tr></table></figure>



<h2 id="合并记录"><a href="#合并记录" class="headerlink" title="合并记录"></a>合并记录</h2><p><code>rebase</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 合并 HEAD 前两个祖先记录</span></span><br><span class="line">git rebase -i HEAD~2</span><br></pre></td></tr></table></figure>

<h4 id="与"><a href="#与" class="headerlink" title="~ 与 ^"></a>~ 与 ^</h4><p>~ : 纵向</p>
<p>^ : 横向</p>
<p><img src="assets/path.png" alt="1566209448773"></p>
<h4 id="rebase-操作"><a href="#rebase-操作" class="headerlink" title="rebase 操作"></a>rebase 操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># p, pick = use commit =&gt; 使用</span></span><br><span class="line"><span class="comment"># r, reword = use commit, but edit the commit message =&gt; 使用，但重新编辑说明</span></span><br><span class="line"><span class="comment"># e, edit = use commit, but stop for amending =&gt; 使用</span></span><br><span class="line"><span class="comment"># s, squash = use commit, but meld into previous commit =&gt; 使用，但合并上一次</span></span><br><span class="line"><span class="comment"># f, fixup = like "squash", but discard this commit's log message =&gt; 就像 squash 那样，但会抛弃这个 Commit 的 Commit message</span></span><br><span class="line"><span class="comment"># x, exec = run command (the rest of the line) using shell =&gt; 执行脚本</span></span><br><span class="line"><span class="comment"># d, drop = remove commit =&gt; 移除</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 弹出编辑器，根据需要的进行修改，然后保存</span></span><br><span class="line"><span class="comment"># 如果为 r，s 则会再次弹出编辑器，修改新的 commit message，修改之后保存</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>  如果出现一些问题，可以通过 <code>git rebase --edit-todo</code> 和 <code>git rebase --continue</code> 进行重新编辑保存</p>
</blockquote>
<h2 id="合并冲突"><a href="#合并冲突" class="headerlink" title="合并冲突"></a>合并冲突</h2><p>有的时候，不同的分支可能会对同一个文件内容和位置上进行操作，这样在合并的过程中就会产生冲突</p>
<ul>
<li>查看冲突文件</li>
<li>修复冲突内容</li>
<li>提交</li>
</ul>
<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><p>有的时候，我们希望给某一个特定的历史提交打上一些标签</p>
<h3 id="新建-tag"><a href="#新建-tag" class="headerlink" title="新建 tag"></a>新建 tag</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.0.0 HEAD/commitId</span><br></pre></td></tr></table></figure>

<h3 id="查看-tag"><a href="#查看-tag" class="headerlink" title="查看 tag"></a>查看 tag</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure>



<h2 id="协同开发"><a href="#协同开发" class="headerlink" title="协同开发"></a>协同开发</h2><p>以上所有的操作都是建立在本地的，如果我们希望进行团队协同开发，那么这个时候，我们就需要把 git 仓库信息与团队中的所有人进行共享</p>
<ul>
<li>分布式 - 中心化与去中心化</li>
</ul>
<h3 id="github"><a href="#github" class="headerlink" title="github"></a>github</h3><p>首先注册一个账号</p>
<p>使用 ssh 链接</p>
<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p><a href="https://help.github.com/cn/articles/connecting-to-github-with-ssh" target="_blank" rel="noopener">https://help.github.com/cn/articles/connecting-to-github-with-ssh</a></p>
<p><a href="https://help.github.com/cn/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener">https://help.github.com/cn/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent</a></p>
<h4 id="生成-SSH-秘钥"><a href="#生成-SSH-秘钥" class="headerlink" title="生成 SSH 秘钥"></a>生成 SSH 秘钥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"zmouse@miaov.com"</span></span><br></pre></td></tr></table></figure>

<h4 id="添加代理"><a href="#添加代理" class="headerlink" title="添加代理"></a>添加代理</h4><p>使用 <code>ssh-add</code> 代理，如果没有启动，可以手动启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> $(ssh-agent -s)</span><br></pre></td></tr></table></figure>

<h4 id="添加-私钥"><a href="#添加-私钥" class="headerlink" title="添加 私钥"></a>添加 私钥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-add 私钥路径</span><br></pre></td></tr></table></figure>

<h4 id="在-github-上添加公钥"><a href="#在-github-上添加公钥" class="headerlink" title="在 github 上添加公钥"></a>在 github 上添加公钥</h4><p>个人中心 -&gt; 设置 -&gt; ssh -&gt; 添加</p>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<h3 id="git-远程"><a href="#git-远程" class="headerlink" title="git 远程"></a>git 远程</h3><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:miaov-zmouse/kkb-test.git</span><br></pre></td></tr></table></figure>

<h4 id="提交（同步）远程"><a href="#提交（同步）远程" class="headerlink" title="提交（同步）远程"></a>提交（同步）远程</h4><p>同步本地仓库到远程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br><span class="line"><span class="comment"># -u 简化后续操作</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<h4 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提交到远程（分支）</span></span><br><span class="line">git push origin [本地分支名称]:[远程分支名称]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程先创建好分支然后拉取到本地</span></span><br><span class="line">git checkout -b [本地分支名称] origin/[远程分支名称]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取远程分支到本地</span></span><br><span class="line">git pull origin [远程分支名称]:[本地分支名称]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程仓库</span></span><br><span class="line">git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看本地分支</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程分支</span></span><br><span class="line">git branch -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有分支</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除本地分支</span></span><br><span class="line">git branch -d [本地分支名称]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程分支</span></span><br><span class="line">git push origin --delete [远程分支名称]</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">git push origin :[远程分支名称]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认提交分支</span></span><br><span class="line">git branch --<span class="built_in">set</span>-upstream-to=origin/[远程分支名称] [本地分支名称]</span><br></pre></td></tr></table></figure>





<h2 id="扩展：工作流-git-work-flow"><a href="#扩展：工作流-git-work-flow" class="headerlink" title="扩展：工作流 - git work flow"></a>扩展：工作流 - git work flow</h2><p><img src="assets/gitflow.png" alt="img"></p>
<h2 id="GUI-工具"><a href="#GUI-工具" class="headerlink" title="GUI 工具"></a>GUI 工具</h2><p><a href="https://git-scm.com/download/gui/win" target="_blank" rel="noopener">https://git-scm.com/download/gui/win</a></p>
<ul>
<li>Sourcetree</li>
<li>other editor</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/27/2-webpack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/05/27/2-webpack/" class="post-title-link" itemprop="url">2-webpack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-27 09:11:56 / Modified: 09:11:57" itemprop="dateCreated datePublished" datetime="2020-05-27T09:11:56+08:00">2020-05-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><p>[toc]</p>
<h2 id="webpack-是什么？"><a href="#webpack-是什么？" class="headerlink" title="webpack 是什么？"></a>webpack 是什么？</h2><ul>
<li>官⽅方⽹网站:<a href="https://webpack.js.org/" target="_blank" rel="noopener">https://webpack.js.org/</a></li>
<li>中⽂文⽹网站:<a href="https://www.webpackjs.com/" target="_blank" rel="noopener">https://www.webpackjs.com/</a></li>
</ul>
<p><img src="./assets/webpack_description_2.jpg" alt="image-20191014165344746"></p>
<p>本质上，<code>webpack</code> 是一个现代 <code>JavaScript</code> 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>webpack</code> 是一个使用 <code>Node.js</code> 实现的一个模块化代码打包工具。所以，我们需要先安装 webpack，安装之前需要搭建好 <code>Node.js</code> 环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D webpack webpack-cli</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：不推荐全局安装</p>
</blockquote>
<p><code>webpack-cli</code> : 提供 webpack 命令、工具，类似 <code>create-react-app</code></p>
<p><code>webpack</code> : webpack 代码，类似 <code>react</code></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/webpack</span><br><span class="line"></span><br><span class="line">// 查看版本</span><br><span class="line">./node_modules/.bin/webpack -v</span><br></pre></td></tr></table></figure>

<p>也可以编辑 <code>package.json</code> 的 <code>scripts</code> 来简化输入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">	...,</span><br><span class="line">	"scripts": &#123;</span><br><span class="line">		"start": "webpack"	// scripts 中可以定位到 ./node_modules/.bin/ 目录下</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>scripts</code> 中使用 <code>test</code>、<code>start</code>、<code>restart</code>、<code>stop</code> 命名的时候，可以在调用的时候省略 <code>run</code>，即直接 <code>npm start</code></p>
</blockquote>
<p>当然，还可以使用更加方便的方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure>

<p>通过 <code>npx</code> 也可以帮助我们定位命令到 <code>./node_modules/.bin/</code> 目录下</p>
<blockquote>
<p>注：npm5.2+ 增加，如果没有，可以使用 npm i -g npx 来安装</p>
</blockquote>
<h2 id="打包模块"><a href="#打包模块" class="headerlink" title="打包模块"></a>打包模块</h2><p>打包之前，我们需要了解一个概念，入口文件</p>
<h3 id="入口文件"><a href="#入口文件" class="headerlink" title="入口文件"></a>入口文件</h3><p>入口文件就是我们项目中加载的第一个文件，比如上面的 <code>main.js</code> 文件，其它文件都是通过 <code>import</code> 等方式引入的，<code>webpack</code> 会从我们指定的入口文件开始分析所有需要依赖的文件，然后把打包成一个完整文件。</p>
<h3 id="打包命令"><a href="#打包命令" class="headerlink" title="打包命令"></a>打包命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack ./js/index.js</span><br></pre></td></tr></table></figure>

<p>上面命令会使用 <code>webpack</code> 默认的一些配置对模块文件进行打包，并把打包后的文件输出到默认创建的 <code>./dist</code> 目录下，打包后的文件名称默认为 <code>main.js</code>。</p>
<p>模块文件打包以后，就可以在不支持 es6 模块语法的浏览器环境下引入使用了。</p>
<p><strong>打包文件分析</strong></p>
<ul>
<li>把分散的模块文件打包到一个文件中，不需要外部引入了</li>
<li>内置了一个小型模块加载器(类似 <code>requireJS</code>)，实现了打包后的代码隔离与引用</li>
</ul>
<p>以上就是 webpack 最基础的使用于基本原理，当然强大的 <code>webpack</code> 远远不止这些功能。</p>
<h2 id="打包配置"><a href="#打包配置" class="headerlink" title="打包配置"></a>打包配置</h2><p>虽然，我们可以直接通过命令的来打包，但是推荐创建一个 <code>webpack.config.js</code> 的配置文件来实现更方便和强大的功能。</p>
<p><code>webpack</code> 命令在运行的时候，默认会读取运行命令所在的目录下的 <code>webpack.config.js</code> 文件，通常我们会在项目的根目录下运行命令和创建配置文件。</p>
<p>我们也可以通过 <code>—config</code> 选项来指定配置文件路径：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --config ./configs/my_webpack.config.js</span><br></pre></td></tr></table></figure>

<p>通常情况下，我们的项目目录大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;</span><br><span class="line">-- &#x2F;dist - 项目打包后存放目录</span><br><span class="line">-- &#x2F;node_modules - 第三方模块</span><br><span class="line">-- &#x2F;src</span><br><span class="line">------ css&#x2F;</span><br><span class="line">------ images&#x2F;</span><br><span class="line">------ js&#x2F;</span><br><span class="line">------ index.js</span><br><span class="line">-- webpack.config.js</span><br><span class="line">-- package.json</span><br></pre></td></tr></table></figure>

<p>配置文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...	<span class="comment">//配置项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="核心配置"><a href="#核心配置" class="headerlink" title="核心配置"></a>核心配置</h2><h3 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h3><p>模式 : <code>&quot;production&quot; | &quot;development&quot; | &quot;none&quot;</code></p>
<!--cli-->

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  mode: <span class="string">'production'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h3><p>指定打包⼊口⽂文件，有三种不同的形式：<code>string | object | array</code></p>
<!--一对一：一个入口、一个打包文件-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<!--多对一：多个入口、一个打包文件-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: [</span><br><span class="line">    <span class="string">'./src/index1.js'</span>,</span><br><span class="line">    <span class="string">'./src/index2.js'</span>,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<!--多对多：多个入口、多打包文件-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="string">'index1'</span>: <span class="string">"./src/index1.js"</span>,</span><br><span class="line">    <span class="string">'index2'</span>: <span class="string">"./src/index2.js"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="output"><a href="#output" class="headerlink" title="output"></a>output</h3><p>打包后的文件位置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...,</span><br><span class="line">  output: &#123;</span><br><span class="line">  	path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">    filename: <span class="string">"bundle.js"</span>,</span><br><span class="line">		filename: <span class="string">"[name].js"</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可以指定一个固定的文件名称，如果是多入口多出口(<code>entry</code> 为对象)，则不能使用单文件出口，需要使用下面的方式</li>
<li>通过 <code>webpack</code> 内置的变量占位符：<code>[name]</code></li>
</ul>
<h2 id="深入"><a href="#深入" class="headerlink" title="深入"></a>深入</h2><p>在 <code>webpack</code> 中，有一个很重要的特性：模块不仅仅只是 <code>js</code> 的文件，<code>webpack</code> 可以把任意文件数据作为模块进行处理，包括：非 js 文本、css、图片等等</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> txt <span class="keyword">from</span> <span class="string">'./a.txt'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(txt);</span><br></pre></td></tr></table></figure>

<p>但是 <code>webpack</code> 默认情况下只能处理 <code>js</code> 模块，如果需要处理其它类型的模块，则需要使用它提供的一些其它功能</p>
<h3 id="执行简要流程"><a href="#执行简要流程" class="headerlink" title="执行简要流程"></a>执行简要流程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[entry] --&gt; B[loaders]</span><br><span class="line">B --&gt; C[plugins]</span><br><span class="line">C --&gt; D[output]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>loaders</code>：<code>webpack</code> 中灰常核心的内容之一，前面我们说的非 js 类型的模块处理就靠它了，不同类型的模块的解析就是依赖不同的 <code>loader</code> 来实现的</li>
<li><code>plugins</code>：<code>webpack</code> 中另外一个核心的内容，它主要是扩展 <code>webpack</code> 本身的一些功能，它们会运行在各种模块解析完成以后的打包编译阶段，比如对解析后的模块文件进行压缩等</li>
</ul>
<h2 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h2><p><a href="https://webpack.js.org/loaders/" target="_blank" rel="noopener">https://webpack.js.org/loaders/</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">  	rules:[</span><br><span class="line">  		&#123;</span><br><span class="line">  			test:<span class="regexp">/\.xxx$/</span>,</span><br><span class="line">       	use:&#123;</span><br><span class="line">        	loader: <span class="string">'xxx-load'</span></span><br><span class="line">      	&#125;</span><br><span class="line">			&#125;</span><br><span class="line">  	]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当 <code>webpack</code> 碰到不识别的模块的时候，<code>webpack</code> 会在配置的 <code>module</code> 中进行该文件解析规则的查找</p>
<ul>
<li><code>rules</code> 就是我们为不同类型的文件定义的解析规则对应的 loader，它是一个数组</li>
<li>每一种类型规则通过 test 选项来定义，通过正则进行匹配，通常我们会通过正则的方式来匹配文件后缀类型</li>
<li><code>use</code> 针对匹配到文件类型，调用对应的 <code>loader</code> 进行处理</li>
</ul>
<p><strong>从一个简单的案例来了解 loader</strong></p>
<!--src/datas/data.txt-->

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我是 txt 的内容</span><br></pre></td></tr></table></figure>

<!--src/datas/data.md-->

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 我是 md 的内容</span><br></pre></td></tr></table></figure>

<!--src/raw-loader.js-->

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> txtData <span class="keyword">from</span> <span class="string">'./datas/data.txt'</span>;</span><br><span class="line"><span class="keyword">import</span> mdData <span class="keyword">from</span> <span class="string">'./datas/data.md'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'txtData: '</span>, txtData);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'mdData: '</span>, mdData);</span><br></pre></td></tr></table></figure>

<p>默认情况下，webpack 会报错，因为 webpack 处理不了 txt 和 md 这样的非 js 的模块，但是我们可以通过专门来处理纯文本内容(不同的 loader 有不同的作用)</p>
<h3 id="raw-loader"><a href="#raw-loader" class="headerlink" title="raw-loader"></a>raw-loader</h3><p>在 webpack 中通过 import 方式导入文件内容，loader 并不是 webpack 内置的，所以首先要安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev raw-loader</span><br></pre></td></tr></table></figure>

<p>然后在 webpack.config.js 中进行配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(txt|md)$/</span>,</span><br><span class="line">        use: <span class="string">'raw-loader'</span></span><br><span class="line">    	&#125;</span><br><span class="line">    ]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>把识别出的资源模块，移动到指定的输出⽬目录，并且返回这个资源在输出目录的地址(字符串)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev file-loader</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">  ...,</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.(png|jpe?g|gif)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">      loader: <span class="string">"file-loader"</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="comment">// placeholder 占位符 [name] 源资源模块的名称</span></span><br><span class="line">        <span class="comment">// [ext] 源资源模块的后缀</span></span><br><span class="line">        name: <span class="string">"[name]_[hash].[ext]"</span>,</span><br><span class="line">        <span class="comment">//打包后的存放位置</span></span><br><span class="line">        outputPath: <span class="string">"./images"</span></span><br><span class="line">        <span class="comment">// 打包后文件的 url</span></span><br><span class="line">        publicPath: <span class="string">'./images'</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>占位符：<a href="https://webpack.js.org/loaders/file-loader#placeholders" target="_blank" rel="noopener">https://webpack.js.org/loaders/file-loader#placeholders</a></p>
</blockquote>
<h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p>可以处理理 <code>file-loader</code> 所有的事情，但是遇到图片格式的模块，可以选择性的把图片转成 <code>base64</code>  格式的字符串，并打包到 <code>js</code> 中，对⼩体积的图片⽐较合适，⼤图⽚不合适。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev url-loader</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">  ...,</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.(png|jpe?g|gif)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">      loader: <span class="string">"url-loader"</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="comment">// placeholder 占位符 [name] 源资源模块的名称</span></span><br><span class="line">        <span class="comment">// [ext] 源资源模块的后缀</span></span><br><span class="line">        name: <span class="string">"[name]_[hash].[ext]"</span>,</span><br><span class="line">        <span class="comment">//打包后的存放位置</span></span><br><span class="line">        outputPath: <span class="string">"./images"</span></span><br><span class="line">        <span class="comment">// 打包后文件的 url</span></span><br><span class="line">        publicPath: <span class="string">'./images'</span>,</span><br><span class="line">        <span class="comment">// 小于 100 字节转成 base64 格式</span></span><br><span class="line">        limit: <span class="number">100</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h3><p>分析 <code>css</code> 模块之间的关系，并合成⼀个 <code>css</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev css-loader</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">  ...,</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">      loader: <span class="string">"css-loader"</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">  			<span class="comment">// 启用/禁用 url() 处理</span></span><br><span class="line">  			url: <span class="literal">true</span>,</span><br><span class="line">  			<span class="comment">// 启用/禁用 @import 处理</span></span><br><span class="line">  			<span class="keyword">import</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 启用/禁用 Sourcemap</span></span><br><span class="line">        sourceMap: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="style-loader"><a href="#style-loader" class="headerlink" title="style-loader"></a>style-loader</h3><p>把 <code>css-loader</code> 生成的内容，用 <code>style</code> 标签挂载到⻚面的 <code>head</code> 中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev style-loader</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">  ...,</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [<span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>]</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>同一个任务的 <code>loader</code> 可以同时挂载多个，处理顺序为：从右到左，也就是先通过 <code>css-loader</code> 处理，然后把处理后的 <code>css</code> 字符串交给 <code>style-loader</code> 进行处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">  ...,</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">  		&#123;</span><br><span class="line">  			loader: <span class="string">'style-loader'</span>,</span><br><span class="line">  			options: &#123;&#125;</span><br><span class="line">  		&#125;,</span><br><span class="line">      <span class="string">'css-loader'</span></span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="sass-loader"><a href="#sass-loader" class="headerlink" title="sass-loader"></a>sass-loader</h3><p>把 <code>sass</code> 语法转换成 <code>css</code> ，依赖 <code>node-sass</code> 模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev sass-loader node-sass</span><br></pre></td></tr></table></figure>



<h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><p>扩展 <code>webpack</code> 本身的一些功能，它们会运行在各种模块解析完成以后的打包编译阶段，比如对解析后的模块文件进行压缩等</p>
<h3 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h3><p>在打包结束后，⾃动生成⼀个 <code>html</code> ⽂文件，并把打包生成的 js 模块引⼊到该 <code>html</code> 中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	...</span><br><span class="line">  plugins: [</span><br><span class="line">     <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">       title: <span class="string">"My App"</span>,</span><br><span class="line">       filename: <span class="string">"app.html"</span>,</span><br><span class="line">       template: <span class="string">"./src/html/index.html"</span></span><br><span class="line">     &#125;) </span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--./src/html/index.html--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=htmlWebpackPlugin.options.title%</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>html-webpack-plugin<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 <code>html</code> 模板中，可以通过 <code>&lt;%=htmlWebpackPlugin.options.XXX%&gt;</code> 的方式获取配置的值</p>
<p><strong>更多的配置</strong></p>
<ul>
<li><code>title</code>: ⽤来生成⻚面的 <code>title</code> 元素</li>
<li><code>filename</code>: 输出的 <code>HTML</code> ⽂件名，默认是 <code>index.html</code>， 也可以直接配置子目录</li>
<li><code>template</code>: 模板⽂件路径，⽀持加载器（<code>loader</code>），⽐如 <code>html!./index.html</code></li>
<li><code>inject</code>: <code>true | &#39;head&#39; | &#39;body&#39; | false</code>，注⼊所有的资源到特定的 <code>template</code> 或者 <code>templateContent</code> 中，如果设置为 <code>true</code> 或者 <code>body</code>，所有的 <code>javascript</code> 资源将被放置到 <code>body</code> 元素的底部，<code>&#39;head&#39;</code> 将放置到 <code>head</code> 元素中</li>
<li><code>favicon</code>: 添加特定的 <code>favicon</code> 路径到输出的 <code>HTML</code> 文件中</li>
<li><code>minify</code>: <code>{} | false</code>， 传递 <code>html-minifier</code> 选项给 <code>minify</code> 输出</li>
<li><code>hash</code>: <code>true | false</code>，如果为 <code>true</code>，将添加 <code>webpack</code> 编译生成的 <code>hash</code> 到所有包含的脚本和 <code>CSS</code> ⽂件，对于解除 <code>cache</code> 很有用</li>
<li><code>cache</code>: <code>true | false</code>，如果为 <code>true</code>，这是默认值，仅在文件修改之后才会发布文件</li>
<li><code>showErrors</code>: <code>true | false</code>，如果为 <code>true</code>，这是默认值，错误信息会写入到 <code>HTML</code> ⻚面中</li>
<li><code>chunks</code>: 允许只添加某些块 (⽐如，仅 unit test 块)</li>
<li><code>chunksSortMode</code>: 允许控制块在添加到⻚面之前的排序方式，⽀持的值:<code>&#39;none&#39; | &#39;default&#39; |{function}-default:&#39;auto&#39;</code></li>
<li><code>excludeChunks</code>: 允许跳过某些块，(⽐如，跳过单元测试的块)</li>
</ul>
<h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h3><p>删除（清理）构建目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev clean-webpack-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;CleanWebpackPlugin&#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	...</span><br><span class="line">  plugins: [</span><br><span class="line">    ...,</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="mini-css-extract-plugin"><a href="#mini-css-extract-plugin" class="headerlink" title="mini-css-extract-plugin"></a>mini-css-extract-plugin</h3><p>提取 <code>CSS</code> 到一个单独的文件中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	...,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">  	rules: [</span><br><span class="line">  		&#123;</span><br><span class="line">  			test: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">  			use: [</span><br><span class="line">  				&#123;</span><br><span class="line">  					loader: MiniCssExtractPlugin.loader</span><br><span class="line">					&#125;,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'sass-loader'</span></span><br><span class="line">        ]</span><br><span class="line">			&#125;</span><br><span class="line">  	]</span><br><span class="line">	&#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    ...,</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    	filename: <span class="string">'[name].css'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="sourceMap"><a href="#sourceMap" class="headerlink" title="sourceMap"></a>sourceMap</h3><p>我们实际运行在浏览器的代码是通过 <code>webpack</code> 打包合并甚至是压缩混淆过的代码，所生成的代码并不利于我们的调试和错误定位，我们可以通过 <code>sourceMap</code> 来解决这个问题，<code>sourceMap</code> 本质是一个记录了编译后代码与源代码的映射关系的文件，我们可以通过 <code>webpack</code> 的 <code>devtool</code> 选项来开启 <code>sourceMap</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  devtool: <span class="string">'source-map'</span>,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先，编译后会为每一个编译文件生成一个对应的 <code>.map</code> 文件，同时在编译文件中添加一段对应的 <code>map</code> 文件引入代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">//# sourceMappingURL=xx.js.map</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">/*# sourceMappingURL=xx.css.map*/</span></span><br></pre></td></tr></table></figure>

<p>同时，现代浏览器都能够识别 <code>sourceMap</code> 文件，如 <code>chrome</code>，会在 <code>Sources</code> 面板中显示根据编译文件与对应的 <code>map</code> 文件定位到源文件中，有利于我们的调试和错误定位</p>
<p><img src="./assets/source_map.png" alt="image-20190630015447876"></p>
<h2 id="WebpackDevServer"><a href="#WebpackDevServer" class="headerlink" title="WebpackDevServer"></a>WebpackDevServer</h2><p>每次的代码修改都需要重新编译打包，刷新浏览器，特别麻烦，我们可以通过安装 <code>webpackDevServer</code> 来改善这方面的体验</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack-dev-server</span><br></pre></td></tr></table></figure>

<p>启动命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack-dev-server</span><br></pre></td></tr></table></figure>

<p>或者，<code>package.json</code> 中添加 <code>scripts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...,</span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"server"</span>: <span class="string">"webpack-dev-server"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改 <code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">  	<span class="comment">// 生成的虚拟目录路径</span></span><br><span class="line">  	contentBase: <span class="string">"./dist"</span>,</span><br><span class="line">  	<span class="comment">// 自动开启浏览器</span></span><br><span class="line">  	open: <span class="literal">true</span>,</span><br><span class="line">  	<span class="comment">// 端口</span></span><br><span class="line">  	port: <span class="number">8081</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动服务以后，<code>webpack</code> 不在会把打包后的文件生成到硬盘真实目录中了，而是直接存在了内存中(同时虚拟了一个存放目录路径)，后期更新编译打包和访问速度大大提升</p>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>当下前端的开发都是前后端分离开发的，前端开发过程中代码会运行在一个服务器环境下(如当前的 <code>WebpackDevServer</code>)，那么在处理一些后端请求的时候通常会出现跨域的问题。<code>WebpackDevServer</code> 内置了一个代理服务，通过内置代理就可以把我们的跨域请求转发目标服务器上(<code>WebpackDevServer</code> 内置的代理发送的请求属于后端 - <code>node</code>，不受同源策略限制)，具体如下：</p>
<!--后端代码，以 node 为例-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> KoaRouter = <span class="built_in">require</span>(<span class="string">'koa-router'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> KoaRouter();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/api/info'</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">    ctx.body = &#123;</span><br><span class="line">        username: <span class="string">'zMouse'</span>,</span><br><span class="line">        gender: <span class="string">'male'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use( router.routes() );</span><br><span class="line">app.listen(<span class="number">8787</span>);</span><br></pre></td></tr></table></figure>

<!--前端代码-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">  url: <span class="string">'http://localhost:8787/api/info'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'res'</span>,res.data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>默认情况下，该代码运行以后会出现跨域请求错误，修改 <code>webpack</code> 配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">  	<span class="comment">// 生成的虚拟目录路径</span></span><br><span class="line">  	contentBase: <span class="string">"./dist"</span>,</span><br><span class="line">  	<span class="comment">// 自动开启浏览器</span></span><br><span class="line">  	open: <span class="literal">true</span>,</span><br><span class="line">  	<span class="comment">// 端口</span></span><br><span class="line">  	port: <span class="number">8081</span>,</span><br><span class="line">  	proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">      	target: <span class="string">'http://localhost:8787'</span></span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过 <code>proxy</code> 设置，当我们在当前 <code>WebpackDevServer</code> 环境下发送以 <code>/api</code> 开头的请求都会被转发到 <a href="http://localhost:8787" target="_blank" rel="noopener">http://localhost:8787</a> 目标服务器下</p>
<!--修改前端代码-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">  <span class="comment">//url: 'http://locahost:8081/api/info',</span></span><br><span class="line">  url: <span class="string">'/api/info'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'res'</span>,res.data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意 <code>url</code> 地址要填写 <code>WebpackDevServer</code> 域，比如当前 <code>WebpackDevServer</code> 开启的是 <a href="http://localhost:8081，也就是我们当前前端代码运行的环境，那么请求的">http://localhost:8081，也就是我们当前前端代码运行的环境，那么请求的</a> <code>url</code> 也必须发送到这里，当我们的请求满足了 <code>proxy</code> 中设置的 <code>/api</code> 开头，那么就会把请求转发到 <code>target</code> ，所以最后的实际请求是：<a href="http://lcoahost:8787/api/info" target="_blank" rel="noopener">http://lcoahost:8787/api/info</a></p>
<h2 id="Hot-Module-Replacement"><a href="#Hot-Module-Replacement" class="headerlink" title="Hot Module Replacement"></a>Hot Module Replacement</h2><p>在之前当代码有变化，我们使用的 <code>live reload</code>，也就是刷新整个页面，虽然这样为我们省掉了很多手动刷新页面的麻烦，但是这样即使只是修改了很小的内容，也会刷新整个页面，无法保持页面操作状态。<code>HMR</code> 随之就出现了，它的核心的局部（模块）更新，也就是不刷新页面，只更新变化的部分</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">  	<span class="comment">// 生成的虚拟目录路径</span></span><br><span class="line">  	contentBase: <span class="string">"./dist"</span>,</span><br><span class="line">  	<span class="comment">// 自动开启浏览器</span></span><br><span class="line">  	open: <span class="literal">true</span>,</span><br><span class="line">  	<span class="comment">// 端口</span></span><br><span class="line">  	port: <span class="number">8081</span>,</span><br><span class="line">  	<span class="comment">// 开启热更新</span></span><br><span class="line">  	hot:<span class="literal">true</span>,</span><br><span class="line">  	<span class="comment">// 即使 HMR 不生效，也不去刷新整个页面(选择开启)</span></span><br><span class="line">    hotOnly:<span class="literal">true</span>,</span><br><span class="line">  	proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">      	target: <span class="string">'http://localhost:8787'</span></span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开启 <code>HMR</code> 以后，当代码发生变化，<code>webpack</code> 即会进行编译，并通过 <code>websocket</code> 通知客户端(浏览器)，我们需要监听处理来自 <code>webpack</code> 的通知，然后通过 <code>HMR</code> 提供的  <code>API</code> 来完成我们的局部更新逻辑</p>
<!--./fn1.js-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'start1!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<!--index.js-->

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fn1 <span class="keyword">from</span> <span class="string">'./fn1.js'</span>;</span><br><span class="line">box1.onclick = fn1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;<span class="comment">//如果开启 HMR</span></span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">'./fn1.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 更新逻辑</span></span><br><span class="line">      box1.onclick = fn1;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码就是 当 ./fn1.js 模块代码发生变化的时候，把最新的 fn1 函数绑定到 box1.onclick 上</p>
<p>从上面就可以看到，<code>HMR</code> 其实就是以模块为单位，当模块代码发生修改的时候，通知客户端进行对应的更新，而客户端则根据具体的模块来更新我们的页面逻辑(这些逻辑需要自己去实现)，好在当前一些常用的更新逻辑都有了现成的插件</p>
<p><strong>css热更新</strong></p>
<p>样式热更新比较简单，<code>style-loader</code> 中就已经集成实现了，我们只需要在 <code>use</code> 中使用就可以了</p>
<p><strong>react 热更新</strong></p>
<ul>
<li><p><a href="https://github.com/gaearon/react-hot-loader" target="_blank" rel="noopener">https://github.com/gaearon/react-hot-loader</a></p>
</li>
<li><p>react 脚手架中也有集成</p>
</li>
</ul>
<p><strong>vue 热更新</strong></p>
<ul>
<li><a href="https://github.com/vuejs/vue-loader" target="_blank" rel="noopener">https://github.com/vuejs/vue-loader</a></li>
<li>vue 脚手架中也有集成</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/27/1-webpack%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/05/27/1-webpack%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/" class="post-title-link" itemprop="url">1-webpack与模块化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-27 09:11:55 / Modified: 09:11:56" itemprop="dateCreated datePublished" datetime="2020-05-27T09:11:55+08:00">2020-05-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="webpack-与-模块化"><a href="#webpack-与-模块化" class="headerlink" title="webpack 与 模块化"></a>webpack 与 模块化</h1><p>[toc]</p>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>模块化已经是现代前端开发中不可或缺的一部分了</p>
<p>把复杂的问题分解成相对独立的模块，这样的设计可以降低程序复杂性，提高代码的重用，也有利于团队协作开发与后期的维护和扩展</p>
<p>从 <code>ECMAScript2015</code> 开始引入了模块的概念，我们称为：<code>ECMAScript Module</code>，简称：<code>ESM</code></p>
<h2 id="模块化的核心"><a href="#模块化的核心" class="headerlink" title="模块化的核心"></a>模块化的核心</h2><ul>
<li>独立的作用域</li>
<li>如何导出模块内部数据</li>
<li>如果导入外部模块数据</li>
</ul>
<h2 id="ESM"><a href="#ESM" class="headerlink" title="ESM"></a>ESM</h2><p>从 <code>ECMAScript2015/ECMAScript6</code> 开始，<code>JavaScript</code> 原生引入了模块概念，而且现在主流浏览器也都有了很好的支持</p>
<h3 id="独立模块作用域"><a href="#独立模块作用域" class="headerlink" title="独立模块作用域"></a>独立模块作用域</h3><p>一个文件就是模块，拥有独立的作用域，且导出的模块都自动处于 <code>严格模式</code>下，即：<code>&#39;use strict&#39;</code></p>
<h3 id="导出模块内部数据"><a href="#导出模块内部数据" class="headerlink" title="导出模块内部数据"></a>导出模块内部数据</h3><p>使用 <code>export</code> 语句导出模块内部数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导出单个特性</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name1, name2, …, nameN;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name1 = …, name2 = …, …, nameN;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">FunctionName</span>(<span class="params"></span>)</span>&#123;...&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassName</span> </span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出列表</span></span><br><span class="line"><span class="keyword">export</span> &#123; name1, name2, …, nameN &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重命名导出</span></span><br><span class="line"><span class="keyword">export</span> &#123; variable1 <span class="keyword">as</span> name1, variable2 <span class="keyword">as</span> name2, …, nameN &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> expression;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">…</span>) </span>&#123; … &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">name1</span>(<span class="params">…</span>) </span>&#123; … &#125;</span><br><span class="line"><span class="keyword">export</span> &#123; name1 <span class="keyword">as</span> <span class="keyword">default</span>, … &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块重定向导出</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> …;</span><br><span class="line"><span class="keyword">export</span> &#123; name1, name2, …, nameN &#125; <span class="keyword">from</span> …;</span><br><span class="line"><span class="keyword">export</span> &#123; import1 <span class="keyword">as</span> name1, import2 <span class="keyword">as</span> name2, …, nameN &#125; <span class="keyword">from</span> …;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> &#125; <span class="keyword">from</span> …;</span><br></pre></td></tr></table></figure>

<h3 id="导入外部模块数据"><a href="#导入外部模块数据" class="headerlink" title="导入外部模块数据"></a>导入外部模块数据</h3><p>导入分为两种模式</p>
<ul>
<li>静态导入</li>
<li>动态导入</li>
</ul>
<p><strong>静态导入</strong></p>
<p>在浏览器中，<code>import</code> 语句只能在声明了 <code>type=&quot;module&quot;</code> 的 script 的标签中使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> defaultExport <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> name <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">export</span> &#125; <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">export</span> <span class="keyword">as</span> alias &#125; <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; export1 , export2 &#125; <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; foo , bar &#125; <span class="keyword">from</span> <span class="string">"module-name/path/to/specific/un-exported/file"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; export1 , export2 <span class="keyword">as</span> alias2 , [...] &#125; <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> defaultExport, &#123; <span class="keyword">export</span> [ , [...] ] &#125; <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> defaultExport, * <span class="keyword">as</span> name <span class="keyword">from</span> <span class="string">"module-name"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"module-name"</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>静态导入方式不支持延迟加载，<code>import</code> 必须这模块的最开始</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// import 必须放置在当前模块最开始加载</span></span><br><span class="line">    <span class="comment">// import m1 from './m1.js'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(m1);</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>动态导入</strong></p>
<p>此外，还有一个类似函数的动态 <code>import()</code>，它不需要依赖 <code>type=&quot;module&quot;</code> 的 script 标签。</p>
<p>关键字 <code>import</code> 可以像调用函数一样来动态的导入模块。以这种方式调用，将返回一个 <code>promise</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">'./m.js'</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">m</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 也支持 await</span></span><br><span class="line"><span class="keyword">let</span> m = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">'./m.js'</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过 <code>import()</code> 方法导入返回的数据会被包装在一个对象中，即使是 <code>default</code> 也是如此</p>
</blockquote>
<h2 id="模块化的向下兼容"><a href="#模块化的向下兼容" class="headerlink" title="模块化的向下兼容"></a>模块化的向下兼容</h2><ul>
<li>CommonJS</li>
<li>AMD</li>
<li>UMD</li>
<li>ESM</li>
</ul>
<p>无论是那种模块化规范，重点关注</p>
<ul>
<li>独立模块作用域</li>
<li>导出模块内部数据</li>
<li>导入外部模块数据</li>
</ul>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><p>在早起前端对于模块化并没有什么规范，反而是偏向服务端的应用有更强烈的需求，CommonJS 规范就是一套偏向服务端的模块化规范，NodeJS 就采用了这个规范。</p>
<p><strong>独立模块作用域</strong></p>
<p>一个文件就是模块，拥有独立的作用域</p>
<p><strong>导出模块内部数据</strong></p>
<p>通过 <code>module.exports</code> 或 <code>exports</code> 对象导出模块内部数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  x: a,</span><br><span class="line">  y: b</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">exports.x = a;</span><br><span class="line">exports.y = b;</span><br></pre></td></tr></table></figure>

<p><strong>导入外部模块数据</strong></p>
<p>通过 <code>require</code> 函数导入外部模块数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line">a.x;</span><br><span class="line">a.y;</span><br></pre></td></tr></table></figure>

<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>因为 CommonJS 规范一些特性（基于文件系统，同步加载），它并不适用于浏览器端，所以另外定义了适用于浏览器端的规范 </p>
<p> <code>AMD(Asynchronous Module Definition)</code></p>
<p><a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="noopener">https://github.com/amdjs/amdjs-api/wiki/AMD</a></p>
<p>浏览器并没有具体实现该规范的代码，我们可以通过一些第三方库来解决</p>
<h4 id="requireJS"><a href="#requireJS" class="headerlink" title="requireJS"></a>requireJS</h4><p><a href="https://requirejs.org/" target="_blank" rel="noopener">https://requirejs.org/</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.html</span></span><br><span class="line">&lt;script data-main=<span class="string">"scripts/main"</span> src=<span class="string">"https://cdn.bootcss.com/require.js/2.3.6/require.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>独立模块作用域</strong></p>
<p>通过一个 <code>define</code> 方法来定义一个模块，并通过该方法的第二个回调函数参数来产生独立作用域</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scripts/Cart.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 模块内部代码</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>导出模块内部数据</strong></p>
<p>通过 <code>return</code> 导出模块内部数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scripts/Cart.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">Cart</span> </span>&#123;</span><br><span class="line">    add(item) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`添加商品：<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>导入外部模块数据</strong></p>
<p>通过前置依赖列表导入外部模块数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scripts/main.js</span></span><br><span class="line"><span class="comment">// 定义一个模块，并导入 ./Cart 模块</span></span><br><span class="line">define([<span class="string">'./Cart'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">Cart</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cart = <span class="keyword">new</span> Cart()</span><br><span class="line">  cart.add(&#123;<span class="attr">name</span>: <span class="string">'iphoneXX'</span>, <span class="attr">price</span>: <span class="number">1000000</span>&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="requireJS-的-CommonJS-风格"><a href="#requireJS-的-CommonJS-风格" class="headerlink" title="requireJS 的 CommonJS 风格"></a><code>requireJS</code> 的 <code>CommonJS</code> 风格</h3><p><code>require.js</code> 也支持 <code>CommonJS</code> 风格的语法</p>
<p><strong>导出模块内部数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scripts/Cart.js</span></span><br><span class="line">define([<span class="string">'require'</span>, <span class="string">'exports'</span>, <span class="string">'module'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Cart</span> </span>&#123;</span><br><span class="line">    add(item) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`添加商品：<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  exports.Cart = Cart;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 忽略不需要的依赖导入</span></span><br><span class="line">define([<span class="string">'exports'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">exports</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Cart</span> </span>&#123;</span><br><span class="line">    add(item) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`添加商品：<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  exports.Cart = Cart;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 如果是依赖的导入为：require, exports, module，也可以省略依赖导入声明</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Cart</span> </span>&#123;</span><br><span class="line">    add(item) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`添加商品：<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  exports.Cart = Cart;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>导入外部模块数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scripts/main.js</span></span><br><span class="line">define([<span class="string">'./Cart'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">Cart</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cart = <span class="keyword">new</span> Cart()</span><br><span class="line">  cart.add(&#123;<span class="attr">name</span>: <span class="string">'iphoneXX'</span>, <span class="attr">price</span>: <span class="number">1000000</span>&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a>UMD</h3><p>严格来说，<code>UMD</code> 并不属于一套模块规范，它主要用来处理 <code>CommonJS</code>、<code>AMD</code>、<code>CMD</code> 的差异兼容，是模块代码能在前面不同的模块环境下都能正常运行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">root, factory</span>) </span>&#123;</span><br><span class="line">  	<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">"object"</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">module</span>.exports === <span class="string">"object"</span>) &#123;</span><br><span class="line">        <span class="comment">// Node, CommonJS-like</span></span><br><span class="line">        <span class="built_in">module</span>.exports = factory(<span class="built_in">require</span>(<span class="string">'jquery'</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">"function"</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">      	<span class="comment">// AMD 模块环境下</span></span><br><span class="line">        define([<span class="string">'jquery'</span>], factory);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123; <span class="comment">// $ 要导入的外部依赖模块</span></span><br><span class="line">    $(<span class="string">'div'</span>)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模块导出数据</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        b: b,</span><br><span class="line">        c: c</span><br><span class="line">    &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<h3 id="tsm-typescript-module"><a href="#tsm-typescript-module" class="headerlink" title="tsm - typescript module"></a>tsm - typescript module</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/18/1-vuex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/05/18/1-vuex/" class="post-title-link" itemprop="url">1-vuex</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-18 15:56:15" itemprop="dateCreated datePublished" datetime="2020-05-18T15:56:15+08:00">2020-05-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h1><p>[TOC]</p>
<h2 id="1、为什么要用-vuex-？"><a href="#1、为什么要用-vuex-？" class="headerlink" title="1、为什么要用 vuex ？"></a>1、为什么要用 vuex ？</h2><p>组件通信的类型</p>
<ul>
<li>父子通信</li>
<li>跨级通信</li>
<li>兄弟通信</li>
<li>路由视图级别通信</li>
</ul>
<p><img src="./assets/vue-components.jpg" alt="vue-components"></p>
<h2 id="2、通信解决方案"><a href="#2、通信解决方案" class="headerlink" title="2、通信解决方案"></a>2、通信解决方案</h2><ul>
<li>props/$emit（父子通信）</li>
<li>$refs/ref（父子通信）</li>
<li>$children/$parent（父子通信）</li>
<li>$attrs/$listeners（父子通信、跨级通信）</li>
<li>provide/inject（父子通信、跨级通信）</li>
<li>eventBus（父子通信、跨级通信、兄弟通信）</li>
<li>vuex（父子通信、跨级通信、兄弟通信、路由视图级别通信）</li>
<li>localStorage/sessionStorage等基于浏览器客户端的存储（父子通信、跨级通信、兄弟通信、路由视图级别通信）</li>
</ul>
<h2 id="3、vuex-是什么？"><a href="#3、vuex-是什么？" class="headerlink" title="3、vuex 是什么？"></a>3、vuex 是什么？</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的 <strong>状态管理模式</strong>，类似 <u>redux</u></p>
<p><img src="./assets/flow.png" alt="flow"></p>
<p>这种状态管理模式包含：</p>
<ul>
<li><strong>State</strong> : 状态数据源</li>
<li><strong>View</strong> : 使用状态数据源的视图</li>
<li><strong>Actions</strong> : 修改更新数据源的操作</li>
</ul>
<p>这种模式遵循的是 <u>单向数据流</u> 模式</p>
<h2 id="4、vuex-的工作流"><a href="#4、vuex-的工作流" class="headerlink" title="4、vuex 的工作流"></a>4、vuex 的工作流</h2><p><img src="assets/vuex.png" alt="vuex"></p>
<ul>
<li><strong>State</strong> : 存储应用状态数据（React 中的 State）</li>
<li><strong>Vue Component</strong> : 消费 <u>State</u></li>
<li><strong>Actions</strong> : 提交修改 <u>State</u> 的动作（包括异步行为）（React 中的 action）</li>
<li><strong>Mutations</strong> : 唯一更改 <u>State</u> 的位置（React 中的 Reducer）</li>
</ul>
<h2 id="5、安装-vuex"><a href="#5、安装-vuex" class="headerlink" title="5、安装 vuex"></a>5、安装 vuex</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex</span><br><span class="line">// or</span><br><span class="line">yarn add vuex</span><br></pre></td></tr></table></figure>



<h2 id="6、引入-vuex"><a href="#6、引入-vuex" class="headerlink" title="6、引入 vuex"></a>6、引入 vuex</h2><p><strong>通过 &lt;script&gt; 引入</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vuex.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过 &lt;script&gt; 方式引入，<u>vuex</u> 会自动安装（也就是主动调用 <code>Vue.use(Vuex)</code>）</p>
<p><strong>通过 <code>import</code> 引入</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br></pre></td></tr></table></figure>

<p>通过 <code>import</code> 方式引入，需要手动安装（手动调用 <code>Vue.use(Vuex)</code>）</p>
<h2 id="7、从-Store-开始"><a href="#7、从-Store-开始" class="headerlink" title="7、从 Store 开始"></a>7、从 Store 开始</h2><p>*<em><code>Store</code>  *</em> 就是仓库，我们前面提到的 <code>state</code> 就存储在 <code>store</code> 中，同时提交动作、修改状态的方法也都由 <code>store</code> 提供和管理</p>
<h3 id="7-1、创建一个-Store"><a href="#7-1、创建一个-Store" class="headerlink" title="7-1、创建一个 Store"></a>7-1、创建一个 Store</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;&#125;,</span><br><span class="line">    getters: &#123;&#125;,</span><br><span class="line">    mutations: &#123;&#125;,</span><br><span class="line">    actions: &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  必须在 <code>Vue.use(Vuex)</code> 之后创建 <code>store</code></p>
</blockquote>
<h2 id="8、核心概念"><a href="#8、核心概念" class="headerlink" title="8、核心概念"></a>8、核心概念</h2><ul>
<li>state</li>
<li>getters</li>
<li>mutations</li>
<li>actions</li>
</ul>
<h3 id="8-1、state"><a href="#8-1、state" class="headerlink" title="8-1、state"></a>8-1、state</h3><h4 id="8-1-1、state-的创建"><a href="#8-1-1、state-的创建" class="headerlink" title="8-1-1、state 的创建"></a>8-1-1、state 的创建</h4><p>存储应用状态数据的对象，<code>state</code> 的值可以是一个对象，也可以是一个返回对象的函数，类似 <u>vue</u> 中组件的 <code>data</code> ，使用函数的方式返回对象可以避免对象引用导致的副作用问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let state = &#123;</span></span><br><span class="line"><span class="comment">//   a: 1</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">let</span> state = <span class="function"><span class="params">_</span>=&gt;</span>(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  	state</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> store2 = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(store.state == store2.state)</span><br><span class="line">store.state.a = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">console</span>.log(store.state.a, store2.state.a);</span><br></pre></td></tr></table></figure>

<ul>
<li>通过 <code>store.state</code> 访问状态数据</li>
<li><code>state</code> 数据与组件 <code>data</code> 一样是被追踪的</li>
</ul>
<h4 id="8-1-2、在组件中使用-store"><a href="#8-1-2、在组件中使用-store" class="headerlink" title="8-1-2、在组件中使用 store"></a>8-1-2、在组件中使用 store</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">'./state'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/state.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; (&#123;</span><br><span class="line">    title: <span class="string">'开课吧'</span>,</span><br><span class="line">    content: <span class="string">'javascript 高级工程师'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;home&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123;content&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import store from &#39;@&#x2F;stores&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;home&#39;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: store.state.title,</span><br><span class="line">      content: store.state.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  问题：</p>
<p>  <code>state</code> 的更新并不会更新视图</p>
</blockquote>
<p><strong>解决</strong></p>
<p>使用 <u>computed</u></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;home&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123;content&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import store from &#39;@&#x2F;stores&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;home&#39;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    title() &#123;</span><br><span class="line">      return store.state.title</span><br><span class="line">    &#125;,</span><br><span class="line">    content() &#123;</span><br><span class="line">      return store.state.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8-1-3、store-配置"><a href="#8-1-3、store-配置" class="headerlink" title="8-1-3、store 配置"></a>8-1-3、store 配置</h4><p>如果每个组件在使用 <code>store</code> 的时候都 <code>import</code> 会比较繁琐，这个时候，我们通过 <u>vuex</u> 提供的 <code>store</code> 选项把 <code>store</code> 对象注入到 <u>vue</u> 的原型上</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/stores'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>

<p>配置注入后，我们就可以在组件实例中使用 <code>this.$store</code> 来访问 <code>store</code> 对象了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;home&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123;content&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; import store from &#39;@&#x2F;stores&#39; &#x2F;&#x2F; 可以去掉了</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;home&#39;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    title() &#123;</span><br><span class="line">      return this.$store.state.title</span><br><span class="line">    &#125;,</span><br><span class="line">    content() &#123;</span><br><span class="line">      return this.$store.state.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8-1-4、使用辅助函数-mapState"><a href="#8-1-4、使用辅助函数-mapState" class="headerlink" title="8-1-4、使用辅助函数 mapState"></a>8-1-4、使用辅助函数 <code>mapState</code></h4><p>当一个组件需要获取多个状态时候，将这些状态都声明为计算属性会有些重复和冗余。为了解决这个问题，我们可以使用 <code>mapState</code> 辅助函数帮助我们生成计算属性，让你少按几次键，通常我们把 <code>store</code> 的 <code>state</code> 通过 <code>mapState</code> 函数映射到组件的 <code>computed</code> 上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;home&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123;content&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState&#125; from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;home&#39;,</span><br><span class="line">  computed: mapState([</span><br><span class="line">    &#39;title&#39;,&#39;content&#39;</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>通过对象方式进行映射</p>
<blockquote>
<p>  场景：当组件中已有与 <code>store</code> 同名的数据名称</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;home&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;subTitle&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123;content&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState&#125; from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;home&#39;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;title: &#39;Vuex&#39;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: mapState(&#123;</span><br><span class="line">      subTitle: &#39;title&#39;,</span><br><span class="line">      content: (&#123;content&#125;) &#x3D;&gt; content.length &lt;&#x3D; 12 ? content : content.substring(0, 12) + &#39;......&#39;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8-1-5、使用扩展运算符组合"><a href="#8-1-5、使用扩展运算符组合" class="headerlink" title="8-1-5、使用扩展运算符组合"></a>8-1-5、使用扩展运算符组合</h4><p>通过对象扩展运算符，可以把 <code>mapState</code> 返回的 <code>state</code> 属性与组件已有计算属性进行融合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState&#125; from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">      computed() &#123;&#x2F;...&#x2F;&#125;,</span><br><span class="line">      ...mapState(&#123;</span><br><span class="line">          &#x2F;&#x2F; ...</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="9、getters"><a href="#9、getters" class="headerlink" title="9、getters"></a>9、getters</h3><p>有时候我们需要从 store 中的 state 中派生出一些状态，类似组件的 <code>data</code> 与 <code>computed</code>，<code>store</code> 也提供了一个 <code>getters</code> 对象来处理派生数据</p>
<h4 id="9-1、getters-函数"><a href="#9-1、getters-函数" class="headerlink" title="9-1、getters 函数"></a>9-1、getters 函数</h4><p>与组件属性一样，我们是通过定义一个函数的形式来返回派生数据的，<code>getters</code> 函数接受两个参数</p>
<ul>
<li>第一个参数：<code>state</code> 对象</li>
<li>第二个参数：<code>getters</code> 对象</li>
</ul>
<h4 id="9-2、通过属性访问"><a href="#9-2、通过属性访问" class="headerlink" title="9-2、通过属性访问"></a>9-2、通过属性访问</h4><p>同样的，与组件计算属性一样，默认是通过属性的方式去访问 <code>getters</code> 中的数据的，这种方式与组件的计算属性一样，也是会缓存结果的</p>
<h4 id="9-3、通过方法访问"><a href="#9-3、通过方法访问" class="headerlink" title="9-3、通过方法访问"></a>9-3、通过方法访问</h4><p>我们还可以通过闭包函数的形式返回一个函数，来实现给 <code>getters</code> 函数传参，需要注意的是这种方式不支持结果缓存</p>
<h4 id="9-4、使用辅助函数-mapGetters"><a href="#9-4、使用辅助函数-mapGetters" class="headerlink" title="9-4、使用辅助函数 mapGetters"></a>9-4、使用辅助函数 <code>mapGetters</code></h4><p>与 <code>mapState</code> 函数类似，通常映射到组件的 <code>computed</code> 上</p>
<h3 id="10、mutations"><a href="#10、mutations" class="headerlink" title="10、mutations"></a>10、mutations</h3><p>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation（类似 redux 中的 action + reducer），Vuex 中的 mutation 非常类似于事件：每个 mutation 都有一个字符串的 <strong>事件类型 (type)</strong> 和 一个 <strong>回调函数 (handler)</strong></p>
<blockquote>
<p>  <code>mutation</code> 中的函数不要直接调用</p>
</blockquote>
<h4 id="10-1、提交"><a href="#10-1、提交" class="headerlink" title="10-1、提交"></a>10-1、提交</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">store.commit(type, payload)</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">store.commit(&#123;</span><br><span class="line">    type: ...,</span><br><span class="line">    payload: ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>type</strong></p>
<p>要提交的 <code>mutation</code> 回调函数名称，type 为固定的 key</p>
<p><strong>payload</strong></p>
<p>载荷：提交的额外数据，任意格式</p>
<h4 id="10-2、mutation-函数"><a href="#10-2、mutation-函数" class="headerlink" title="10-2、mutation 函数"></a>10-2、mutation 函数</h4><p><code>mutation</code> 中的函数被 <code>commit</code> 执行的时候，接收两个参数</p>
<ul>
<li>第一个参数：<code>state</code> 对象</li>
<li>第二个参数： <code>commit</code> 提交的 <code>payload</code></li>
</ul>
<p>在 <code>mutation</code> 函数中，我们就可以通过 <code>state</code> 对象进行状态数据的修改</p>
<h4 id="10-3、使用辅助函数-mapMutations"><a href="#10-3、使用辅助函数-mapMutations" class="headerlink" title="10-3、使用辅助函数 mapMutations"></a>10-3、使用辅助函数 <code>mapMutations</code></h4><p><code>mapMutations</code> 函数的使用与 <code>mapState</code> 和 <code>mapGetters</code> 类似，但是其一般是把组件的 <code>methods</code> 映射为 <code>store</code> 的 <code>mutations</code> 的 <code>commit</code> 调用</p>
<h4 id="10-4、mutation-函数必须是同步的"><a href="#10-4、mutation-函数必须是同步的" class="headerlink" title="10-4、mutation 函数必须是同步的"></a>10-4、mutation 函数必须是同步的</h4><p><code>commit</code> 方法没有返回值</p>
<h3 id="11、actions"><a href="#11、actions" class="headerlink" title="11、actions"></a>11、actions</h3><p><code>action</code> 中的函数与 <code>mutation</code> 中的函数类似，但是它主要用来进行异步任务的处理，然后通过提交 <code>mutation</code> 来修改 <code>state</code></p>
<blockquote>
<p>注意：<code>action</code> 中的函数不要直接修改 <code>state</code></p>
</blockquote>
<h4 id="11-1、提交"><a href="#11-1、提交" class="headerlink" title="11-1、提交"></a>11-1、提交</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">store.dispatch(type, payload)</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">    type: ...,</span><br><span class="line">    payload: ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>action</code> 任务需要通过 <code>dispatch</code> 方法来提交（派发），与 <code>commit</code> 类似</p>
<p><code>dispatch</code> 方法有返回值，且一定返回一个 <code>promise</code> 对象</p>
<h4 id="11-2、action-函数"><a href="#11-2、action-函数" class="headerlink" title="11-2、action 函数"></a>11-2、action 函数</h4><p><code>action</code> 中的函数执行的过程中也接受两个参数</p>
<ul>
<li>第一个参数：<code>store</code> 对象</li>
<li>第二个参数： <code>dispatch</code> 提交的 <code>payload</code></li>
</ul>
<h4 id="11-3、使用辅助函数-mapActions"><a href="#11-3、使用辅助函数-mapActions" class="headerlink" title="11-3、使用辅助函数 mapActions"></a>11-3、使用辅助函数 <code>mapActions</code></h4><p>与 <code>mapMutations</code> 函数类似，把组件的 <code>methods</code> 映射为 <code>store</code> 的 <code>actions</code> 的 <code>dispatch</code> 调用</p>
<h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>这个更多的是基于一种代码组织结构上的辅助</p>
<p><a href="https://vuex.vuejs.org/zh/guide/modules.html" target="_blank" rel="noopener">https://vuex.vuejs.org/zh/guide/modules.html</a></p>
<p><a href="https://vuex.vuejs.org/zh/guide/structure.html" target="_blank" rel="noopener">https://vuex.vuejs.org/zh/guide/structure.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/14/13-%E8%B7%AF%E7%94%B1%E5%85%83%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/05/14/13-%E8%B7%AF%E7%94%B1%E5%85%83%E4%BF%A1%E6%81%AF/" class="post-title-link" itemprop="url">13-路由元信息</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-14 09:26:33" itemprop="dateCreated datePublished" datetime="2020-05-14T09:26:33+08:00">2020-05-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h1><p>[TOC]</p>
<h2 id="路由元信息"><a href="#路由元信息" class="headerlink" title="路由元信息"></a>路由元信息</h2><p>定义路由的时候可以配置 <code>meta</code> 字段</p>
<h3 id="通过-meta-定义要验证的路由"><a href="#通过-meta-定义要验证的路由" class="headerlink" title="通过 meta 定义要验证的路由"></a>通过 <code>meta</code> 定义要验证的路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/user'</span>,</span><br><span class="line">      component: User,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">''</span>,</span><br><span class="line">          name: <span class="string">'user'</span>,</span><br><span class="line">          component: Profile,</span><br><span class="line">          meta: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'cart'</span>,</span><br><span class="line">          name: <span class="string">'user-cart'</span>,</span><br><span class="line">          component: Cart,</span><br><span class="line">          meta: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isLogin = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  NProgress.start()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (to.meta.requiresAuth &amp;&amp; !isLogin) &#123;</span><br><span class="line">      next(&#123;</span><br><span class="line">        name: <span class="string">'login'</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>或者</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/user'</span>,</span><br><span class="line">      component: User,</span><br><span class="line">      meta: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span> &#125;</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">''</span>,</span><br><span class="line">          name: <span class="string">'user'</span>,</span><br><span class="line">          component: Profile</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'cart'</span>,</span><br><span class="line">          name: <span class="string">'user-cart'</span>,</span><br><span class="line">          component: Cart</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isLogin = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  NProgress.start()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (to.matched.some(<span class="function"><span class="params">record</span> =&gt;</span> record.meta.requiresAuth) &amp;&amp; !isLogin) &#123;</span><br><span class="line">      next(&#123;</span><br><span class="line">        name: <span class="string">'login'</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/note/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/note/">1</a><span class="space">&hellip;</span><a class="page-number" href="/note/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/note/page/8/">8</a><a class="page-number" href="/note/page/9/">9</a><a class="extend next" rel="next" href="/note/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/note/archives/">
        
          <span class="site-state-item-count">86</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/note/lib/anime.min.js"></script>
  <script src="/note/lib/velocity/velocity.min.js"></script>
  <script src="/note/lib/velocity/velocity.ui.min.js"></script>

<script src="/note/js/utils.js"></script>

<script src="/note/js/motion.js"></script>


<script src="/note/js/schemes/muse.js"></script>


<script src="/note/js/next-boot.js"></script>




  















  

  

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/note/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/note/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/note/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/note/images/logo.svg" color="#222">

<link rel="stylesheet" href="/note/css/main.css">


<link rel="stylesheet" href="/note/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/note/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="javascript.note">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="javascript.note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>javascript.note</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/note/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">javascript.note</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/note/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/note/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/vue-computed%20%E4%B8%8E%20watch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/vue-computed%20%E4%B8%8E%20watch/" class="post-title-link" itemprop="url">vue-computed 与 watch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><p>[TOC]</p>
<h2 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h2><p>在实际的应用中，我们会有一些原始数据，同时在应用中又会有一些数据是根据某些原始数据派生出来的，针对这样的一种情况，<code>vue</code> 定义了一个专门用来处理这种派生数据的选项：<code>computed</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span> 所有<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"男"</span> /&gt;</span> 男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"女"</span> /&gt;</span> 女<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"user of showUsers"</span>&gt;</span></span><br><span class="line">      &#123;&#123;user.username&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    gender: <span class="string">''</span>,</span><br><span class="line">    users: [</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">'baogege'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">username</span>: <span class="string">'mt'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">username</span>: <span class="string">'haigege'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">username</span>: <span class="string">'zMouse'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">5</span>, <span class="attr">username</span>: <span class="string">'reci'</span>, <span class="attr">gender</span>: <span class="string">'女'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">6</span>, <span class="attr">username</span>: <span class="string">'lisi'</span>, <span class="attr">gender</span>: <span class="string">'女'</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    showUsers() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.gender === <span class="string">''</span> ? [...this.users] : <span class="keyword">this</span>.users.filter(<span class="function"><span class="params">user</span>=&gt;</span>user.gender===<span class="keyword">this</span>.gender);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>计算属性类似 <code>getter</code> 和 <code>setter</code> ，当访问某个计算属性的时候，就会调用 <code>computed</code> 中同名的函数，函数的返回值将作为该计算属性的值</li>
<li>计算属性的值依赖计算函数中依赖的其它响应式数据</li>
<li>计算属性的值可以缓存，如果依赖的其它响应式数据没有发生变化，但多次访问该计算属性，得到结果是最近一次变化产生的值（相对于调用方法得到结果在某些时候性能要好一些）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;now&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"showDate=true"</span>&gt;</span>showDate<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"showDate"</span>&gt;</span>&#123;&#123;now&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">		showDate: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    now() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="计算属性的-getter-与-setter"><a href="#计算属性的-getter-与-setter" class="headerlink" title="计算属性的 getter 与 setter"></a>计算属性的 <code>getter</code> 与 <code>setter</code></h3><p>默认情况下，计算属性函数是一个 <code>getter</code> 函数，如果计算属性只有 <u>get</u> 需求，则可以简写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  now() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 等于</span></span><br><span class="line">  now: &#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是有的时候，这种派生数据既有 <code>get</code> 需求，也有 <code>set</code> 需求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span> 所有<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"男"</span> /&gt;</span> 男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"女"</span> /&gt;</span> 女<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"user of showUsers"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"user.checked"</span> /&gt;</span></span><br><span class="line">      &#123;&#123;user.username&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"checkAll"</span>&gt;</span>全选<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    gender: <span class="string">''</span>,</span><br><span class="line">    users: [</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">'baogege'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">username</span>: <span class="string">'mt'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">username</span>: <span class="string">'haigege'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">username</span>: <span class="string">'zMouse'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">5</span>, <span class="attr">username</span>: <span class="string">'reci'</span>, <span class="attr">gender</span>: <span class="string">'女'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">6</span>, <span class="attr">username</span>: <span class="string">'lisi'</span>, <span class="attr">gender</span>: <span class="string">'女'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    showUsers() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.gender === <span class="string">''</span> ? [...this.users] : <span class="keyword">this</span>.users.filter(<span class="function"><span class="params">user</span>=&gt;</span>user.gender===<span class="keyword">this</span>.gender);</span><br><span class="line">    &#125;,</span><br><span class="line">    checkAll: &#123;</span><br><span class="line">      <span class="keyword">get</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.users.every(<span class="function"><span class="params">user</span>=&gt;</span>user.checked);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">set</span>(newValue) &#123;</span><br><span class="line">        <span class="keyword">this</span>.users = <span class="keyword">this</span>.users.map(<span class="function"><span class="params">user</span>=&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            ...user,</span><br><span class="line">            checked: newValue</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><p>有的时候，我们需要的派生数据是通过异步的方式处理的，这个时候，计算属性就不太好用了（不能处理异步）。</p>
<p>我们可以使用另外一个选项：<code>watch</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"keyWord"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"user of showUsers"</span>&gt;</span></span><br><span class="line">      &#123;&#123;user.username&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    keyWord: <span class="string">''</span>,</span><br><span class="line">    users: [</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">'baogege'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">username</span>: <span class="string">'mt'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">username</span>: <span class="string">'haigege'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">username</span>: <span class="string">'zMouse'</span>, <span class="attr">gender</span>: <span class="string">'男'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">5</span>, <span class="attr">username</span>: <span class="string">'reci'</span>, <span class="attr">gender</span>: <span class="string">'女'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">6</span>, <span class="attr">username</span>: <span class="string">'lisi'</span>, <span class="attr">gender</span>: <span class="string">'女'</span>,<span class="attr">checked</span>:<span class="literal">false</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    showUsers: []</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    keyWord(newVal, oldVal) &#123;</span><br><span class="line">      <span class="comment">// 模拟网络请求</span></span><br><span class="line">      setTimeout(<span class="function"><span class="params">_</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.showUsers = <span class="keyword">this</span>.users.filter(<span class="function"><span class="params">user</span>=&gt;</span>user.username.includes(newVal));</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="多层监听"><a href="#多层监听" class="headerlink" title="多层监听"></a>多层监听</h3><p>对于多层数据的监听，可以使用字符串+点语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  <span class="string">'a.b.c'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="深度监听"><a href="#深度监听" class="headerlink" title="深度监听"></a>深度监听</h3><p>默认情况下，<code>watch</code> 只对当前指定的值进行一层监听，如果需要对对象进行深度监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    handler() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'a deep'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    deep: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/vue-%E4%BA%8B%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/vue-%E4%BA%8B%E4%BB%B6/" class="post-title-link" itemprop="url">vue-事件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><p>[TOC]</p>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p>在 <code>vue</code> 中，事件通过指令 <code>v-on</code> 进行绑定，<code>v-on</code> 缩写 <code>@</code> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">组件</span> <span class="attr">v-on:</span>事件名称=<span class="string">"表达式"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">组件</span> @事件名称=<span class="string">"表达式"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="组件的-methods-选项"><a href="#组件的-methods-选项" class="headerlink" title="组件的 methods 选项"></a>组件的 <code>methods</code> 选项</h3><p>在组件选项中，提供了一个 <code>methods</code> 选项，用来存放组件中使用的函数方法，且存放在 <code>methods</code> 中的函数方法可以通过组件实例（this）进行访问</p>
<h3 id="通过内联方式绑定事件处理函数"><a href="#通过内联方式绑定事件处理函数" class="headerlink" title="通过内联方式绑定事件处理函数"></a>通过内联方式绑定事件处理函数</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">组件</span> @事件名称=<span class="string">"fn"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">  ...,</span><br><span class="line">  methods: &#123;</span><br><span class="line">  	fn() &#123;</span><br><span class="line"><span class="actionscript">  		<span class="comment">//...	</span></span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>事件绑定函数中的 <code>this</code> 指向组件实例</li>
<li>事件绑定函数中的第一个参数默认为 <code>event</code> 对象</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">组件</span> @事件名称=<span class="string">"fn('kaikeba', $event)"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">  ...,</span><br><span class="line">  methods: &#123;</span><br><span class="line">  	fn(name, ev) &#123;</span><br><span class="line"><span class="actionscript">  		<span class="comment">//...	</span></span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以在事件绑定中直接调用函数（并不会立即执行，也是通过事件触发执行的）</p>
<ul>
<li>事件对象需要手动传入，名称为 <code>$event</code></li>
</ul>
<h3 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h3><p>在事件函数中，我们可以通过 <code>ev.preventDefault()</code>、<code>ev.stopPropagation()</code> 来阻止默认行为，阻止冒泡，但是中 <u>vue</u> 中提供一些更加方便的方式来处理这些问题，这就是事件修饰符</p>
<h4 id="stop"><a href="#stop" class="headerlink" title=".stop"></a>.stop</h4><h4 id="prevent"><a href="#prevent" class="headerlink" title=".prevent"></a>.prevent</h4><h4 id="capture"><a href="#capture" class="headerlink" title=".capture"></a>.capture</h4><h4 id="self"><a href="#self" class="headerlink" title=".self"></a>.self</h4><h4 id="once"><a href="#once" class="headerlink" title=".once"></a>.once</h4><h4 id="passive"><a href="#passive" class="headerlink" title=".passive"></a>.passive</h4><h3 id="按键修饰符"><a href="#按键修饰符" class="headerlink" title="按键修饰符"></a>按键修饰符</h3><p><code>vue</code> 还提供了许多按键修饰符</p>
<h4 id="keyCode"><a href="#keyCode" class="headerlink" title=".keyCode"></a>.keyCode</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">组件</span> @<span class="attr">keyup.13</span>=<span class="string">"fn"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="enter"><a href="#enter" class="headerlink" title=".enter"></a>.enter</h4><h4 id="down"><a href="#down" class="headerlink" title=".down"></a>.down</h4><h4 id="exact"><a href="#exact" class="headerlink" title=".exact"></a>.exact</h4><h3 id="原生事件"><a href="#原生事件" class="headerlink" title="原生事件"></a>原生事件</h3><p>自定义组件中可以自定义一些事件，可以通过 <code>.native</code> 修饰符来指定监听原生中的事件，而不是组件自定义事件</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/vue-%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/vue-%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6/" class="post-title-link" itemprop="url">vue-单文件组件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vue-单文件组件"><a href="#vue-单文件组件" class="headerlink" title="vue 单文件组件"></a>vue 单文件组件</h1><p>[TOC]</p>
<h2 id="单文件组件"><a href="#单文件组件" class="headerlink" title="单文件组件"></a>单文件组件</h2><p><u>vue</u> 的单文件组件是官方提供的一种用来组织组件代码的形式，该文件以 <code>.vue</code> 为后缀，该文件会被 <u>vue-cli</u> 内置的 <u>webpack</u> 解析生成对应的 <u>javascript</u>、<u>html</u>、<u>css</u> 文件</p>
<p><a href="https://vue-loader-v14.vuejs.org/zh-cn/start/spec.html" target="_blank" rel="noopener">https://vue-loader-v14.vuejs.org/zh-cn/start/spec.html</a></p>
<h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;example&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &#39;Hello world!&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.example &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>单文件组件把一个组件所包含的 <u>结构</u>、<u>样式</u>、<u>行为</u> 分别通过 <u>template</u>、<u>style</u>、<u>script</u> 进行分离包含，然后统一组织在一个文件中</p>
<p>一个单文件组件最少必须包含 <u>template</u>，可以不需要 <u>script</u> 和 <u>style</u></p>
<h3 id="lang-属性"><a href="#lang-属性" class="headerlink" title="lang 属性"></a><u>lang</u> 属性</h3><p>无论是 <u>template</u>、<u>script</u> 还是 <u>style</u>，都可以通过 <u>lang</u> 属性来指定它们所使用的语言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template lang&#x3D;&quot;jade&quot;&gt;</span><br><span class="line">  div.example</span><br><span class="line">		p &#123;&#123; msg &#125;&#125;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">export default Vue.extend(&#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &#39;Hello world&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang&#x3D;&quot;stylus&quot;&gt;</span><br><span class="line">.example</span><br><span class="line">  color red</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="src-属性"><a href="#src-属性" class="headerlink" title="src 属性"></a><u>src</u> 属性</h3><p>我们还可以通过 <u>src</u> 属性把文件分离到单独的文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template src&#x3D;&quot;.&#x2F;template.html&quot;&gt;&lt;&#x2F;template&gt;</span><br><span class="line">&lt;style src&#x3D;&quot;.&#x2F;style.css&quot;&gt;&lt;&#x2F;style&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;.&#x2F;script.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里的 <u>src</u> 同样遵循模块化的导入规则，<code>./</code> 开头的表示相对路径，<code>/</code> 开头表示 <u>NPM</u> 包中的资源</p>
</blockquote>
<h3 id="有作用域的-CSS"><a href="#有作用域的-CSS" class="headerlink" title="有作用域的 CSS"></a>有作用域的 CSS</h3><p>当 <code>style</code> 标签有 <code>scoped</code> 属性时，它的 <u>CSS</u> 只作用于当前组件中的元素。这类似于 <u>Shadow DOM</u> 中的样式封装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">.example &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;example&quot;&gt;hi&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<p>解析后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.example[data-v-f3f3eg9] &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;example&quot; data-v-f3f3eg9&gt;hi&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="混用本地和全局样式"><a href="#混用本地和全局样式" class="headerlink" title="混用本地和全局样式"></a>混用本地和全局样式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">&#x2F;* 全局样式 *&#x2F;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&#x2F;* 本地样式 *&#x2F;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="资源路径处理"><a href="#资源路径处理" class="headerlink" title="资源路径处理"></a>资源路径处理</h3><p>在项目开发中，我们经常会碰到要引入外部资源的需求，<u>vue</u> 单文件系统中，对资源引入路径有一定的特殊处理</p>
<ul>
<li>绝对路径前缀</li>
<li>相对路径前缀</li>
<li>特殊前缀</li>
</ul>
<h4 id="绝对路径前缀"><a href="#绝对路径前缀" class="headerlink" title="绝对路径前缀"></a>绝对路径前缀</h4><p>就是以 <code>/</code>、<code>https://kaikeba.com/</code> 等这样的绝对路径开头的，不做任何处理，直到被浏览器解析</p>
<h4 id="相对路径前缀"><a href="#相对路径前缀" class="headerlink" title="相对路径前缀"></a>相对路径前缀</h4><p>就是以 <code>./</code>、<code>../</code> 这样的相对路径开头的，将会被看作相对的模块依赖，并按照你的本地文件系统上的目录结构进行解析，如：<code>&lt;img src=&quot;../a.png&quot;&gt;</code> 解析后：<code>&lt;img src=&quot;require(&#39;../a.png&#39;)&quot;&gt;</code>，类似的还包括 <code>background: url(...)</code> 和 <code>@import</code></p>
<h4 id="特殊前缀"><a href="#特殊前缀" class="headerlink" title="特殊前缀"></a>特殊前缀</h4><ul>
<li>如果路径以 <code>@</code> 开头，也会被看作模块依赖。如果你的 webpack 配置中给 <code>@</code> 配置了 alias，这就很有用了。所有 <code>vue-cli</code> 创建的项目都默认配置了将 <code>@</code> 指向 <code>/src</code></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/vue-%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/vue-%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">vue-基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><p>[TOC]</p>
<h2 id="vue-js"><a href="#vue-js" class="headerlink" title="vue.js"></a>vue.js</h2><p><code>vue.js</code> 是一套用于构建用户界面的渐进式框架</p>
<h3 id="渐进式"><a href="#渐进式" class="headerlink" title="渐进式"></a>渐进式</h3><h3 id="Vue-核心"><a href="#Vue-核心" class="headerlink" title="Vue 核心"></a>Vue 核心</h3><ul>
<li>声明式渲染</li>
<li>组件</li>
</ul>
<h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><p>我们还是先通过 &lt;script&gt; 的方式来引入 <u>vue</u></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p><code>vue</code> 的核心功能之一就是组件</p>
<h3 id="组件基本分类"><a href="#组件基本分类" class="headerlink" title="组件基本分类"></a>组件基本分类</h3><ul>
<li>根组件</li>
<li>可复用的功能组件</li>
</ul>
<h3 id="根组件的创建"><a href="#根组件的创建" class="headerlink" title="根组件的创建"></a>根组件的创建</h3><p>通过 <code>vue</code> 提供的构造函数可以实例化出来一个跟组件实例对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(创建组件所需要的一些配置选项);</span><br></pre></td></tr></table></figure>

<h3 id="可复用的功能组件"><a href="#可复用的功能组件" class="headerlink" title="可复用的功能组件"></a>可复用的功能组件</h3><p>通过 <code>Vue</code> 提供的静态方法 <code>component</code> 窗口可复用的功能组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> component1 = Vue.component(创建组件所需要的一些配置选项)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>组件配置选项：<a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener">https://cn.vuejs.org/v2/api/</a></p>
</blockquote>
<h2 id="组件内容渲染"><a href="#组件内容渲染" class="headerlink" title="组件内容渲染"></a>组件内容渲染</h2><p>渲染一个组件的内容可以通过两种方式来进行</p>
<ul>
<li>template 选项</li>
<li>render 选项（函数）</li>
</ul>
<h3 id="template"><a href="#template" class="headerlink" title="template"></a>template</h3><p>type : string</p>
<p>组件的模板结构（HTML），模板内容会被 <code>vue</code> 进行渲染，生成最终的 <code>HTML</code> 内容，并替换占位（挂载）元素</p>
<h3 id="el"><a href="#el" class="headerlink" title="el"></a>el</h3><p>type : string | Element</p>
<p>提供一个在页面上已存在的 DOM 元素作为 Vue 实例的挂载目标。可以是 CSS 选择器，也可以是一个 HTMLElement 实例，</p>
<ul>
<li>该选择只对 <code>new</code> 创建的实例有效</li>
<li>如果提供 <code>el</code> ，但是没有提供 <code>template</code> ，则 <code>el</code> 的内容讲作为 <code>template</code></li>
</ul>
<h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><p>type : (createElement: () =&gt; VNode) =&gt; VNode</p>
<p>发挥 <code>JavaScript</code> 最大的编程能力，直接创建 <code>VNode</code> （虚拟dom对象），优先级高于 <code>el</code> 和 <code>template</code></p>
<ul>
<li>有更强大的编程能力</li>
<li>有更高的性能</li>
</ul>
<blockquote>
<p><a href="https://cn.vuejs.org/v2/guide/render-function.html" target="_blank" rel="noopener">https://cn.vuejs.org/v2/guide/render-function.html</a></p>
</blockquote>
<h3 id="使用-mount-方法延迟-Vue-实例的挂载"><a href="#使用-mount-方法延迟-Vue-实例的挂载" class="headerlink" title="使用 $mount 方法延迟 Vue 实例的挂载"></a>使用 $mount 方法延迟 <code>Vue</code> 实例的挂载</h3><p>当 <code>Vue</code> 实例没有 <code>el</code> 选项的时候，它会处于一种 <u>未挂载</u> 的状态，我们可以通过组件 <code>Vue</code> 实例对象的 <code>$mount</code> 方法来手动挂载，通过该方式，我们也可以达到延迟 <code>Vue</code> 实例的挂载的目的</p>
<h2 id="组件中的数据（状态）"><a href="#组件中的数据（状态）" class="headerlink" title="组件中的数据（状态）"></a>组件中的数据（状态）</h2><h3 id="data"><a href="#data" class="headerlink" title="data"></a>data</h3><p>组件内部使用的数据，<code>data</code> 是一个对象，<code>data</code> 中的值可以中模板中直接访问</p>
<ul>
<li><code>Vue</code> 实例组件（根组件）的 <code>data</code> 是一个对象</li>
<li>可复用功能组件的 <code>data</code> 必须是一个函数，且该函数必须返回一个对象（因为复用性，避免多个组件实例引用同一个对象。换句话说，组件中使用的数据必须是一个对象，但是可复用组件的这个数据对象必须通过函数返回</li>
</ul>
<h3 id="data-的访问"><a href="#data-的访问" class="headerlink" title="data 的访问"></a>data 的访问</h3><p><code>data</code> 数据可以直接通过组件实例对象访问，也可以通过实例对象下的 <code>$data</code> 属性进行访问</p>
<blockquote>
<p>组件实例对象下有很多的以 <code>$</code> 开头的属性，这些都是实例对象内置的一些属性和方法，<code>vue</code> 为了区分数据与内置属性方法，内置的属性和方法默认都是以 <code>$</code> 开始的，所以我们中数据中应该避免使用 <code>$</code> 开头的数据</p>
</blockquote>
<h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><p><u>vue</u> 使用了基于 <u>html</u> 的模板语法，使用声明式的方式把实例中的数据（<code>data</code>）与 <u>DOM</u> 进行绑定，<code>data</code> 中的数据在模板中可以直接使用</p>
<h3 id="Mustache（双大括号，大胡子）-语法"><a href="#Mustache（双大括号，大胡子）-语法" class="headerlink" title="Mustache（双大括号，大胡子） 语法"></a>Mustache（双大括号，大胡子） 语法</h3><p>在 <u>vue</u> 中，我们是通过一对双大括号把实例中的数据渲染到模板内容中</p>
<h4 id="插值表达式"><a href="#插值表达式" class="headerlink" title="插值表达式"></a>插值表达式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在<span class="string">`&#123;&#123;&#125;&#125;`</span>中,我们可以放置表达式值</span><br><span class="line">&#123;&#123;表达式&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    title: <span class="string">'vue 框架'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`&lt;div&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      &#123;&#123;title&#125;&#125;</span><br><span class="line">  	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el: <span class="string">'#app'</span>,</span></span><br><span class="line">            data: &#123;</span><br><span class="line"><span class="actionscript">              title: <span class="string">'vue 框架'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="数据到视图的更新"><a href="#数据到视图的更新" class="headerlink" title="数据到视图的更新"></a>数据到视图的更新</h3><p><u>vue</u> 会把  <code>data</code> 中的数据挂载到实例属性下，同时对它们进行主动的监听拦截，当数据发生变化的时候，重新渲染模板。我们可以通过实例对象对数据进行修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.title = <span class="string">'开课吧'</span>;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">app.$data.title = <span class="string">'开课吧'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="检测变化的注意事项"><a href="#检测变化的注意事项" class="headerlink" title="检测变化的注意事项"></a>检测变化的注意事项</h3><p>在 <u>vue3</u> 之前，数据的监听是通过 <code>Object.defineProperty</code> 方法来实现的，但是该方法只能监听拦截单个数据，对于对象新增属性无法监听拦截。所以，对于数据对象中新增的属性，我们需要调用 <u>vue</u> 提供的方法来进行处理</p>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p>通过 <code>Object.defineProperty</code> 监听拦截中存在一些问题</p>
<ul>
<li>属性新增属性</li>
<li>数组方法：push、pop、shift、unshift、splice、sort、reverse</li>
<li>数组新增值：[]</li>
<li>数组 length 属性</li>
</ul>
<p>以上的操作中并不会触发监听拦截</p>
<blockquote>
<p><code>vue</code> 对数组中的 <code>push</code>、<code>pop</code> 等方法进行重新包装，所以在 <code>vue</code> 中调用这些方法，可以对数组的修改进行监听拦截</p>
<p><a href="https://cn.vuejs.org/v2/guide/list.html#变异方法-mutation-method" target="_blank" rel="noopener">https://cn.vuejs.org/v2/guide/list.html#%E5%8F%98%E5%BC%82%E6%96%B9%E6%B3%95-mutation-method</a></p>
</blockquote>
<h3 id="使用-Vue-set-方法添加新数据"><a href="#使用-Vue-set-方法添加新数据" class="headerlink" title="使用 Vue.set 方法添加新数据"></a>使用 Vue.set 方法添加新数据</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>title: &#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>user.username: &#123;&#123;user.username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>user.gender: &#123;&#123;user.gender&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el: <span class="string">'#app'</span>,</span></span><br><span class="line">            data: &#123;</span><br><span class="line"><span class="actionscript">                title: <span class="string">'vue 框架'</span>,</span></span><br><span class="line">                user: &#123;</span><br><span class="line"><span class="actionscript">                    username: <span class="string">'zMouse'</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在模板中，我们使用了一个不存在的数据 <code>user.gender</code></p>
<p>如果我们通过 <code>app.user.gender = &#39;男&#39;</code>的方式来新增，是不会被 <u>vue</u> 拦截监听处理的，我们需要使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.set(app.user, <span class="string">'gender'</span>, <span class="string">'男'</span>);</span><br><span class="line"><span class="comment">// 实例.$set 是 Vue.set 的别名</span></span><br><span class="line">app.$<span class="keyword">set</span>(app.user, 'gender', '男');</span><br></pre></td></tr></table></figure>

<p>这样的方式，<code>set</code> 方法给 <code>app.user</code>  添加 <code>gender</code> 属性的同时，对它进行了 <code>defineProperty</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/koa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/koa/" class="post-title-link" itemprop="url">koa</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="koa"><a href="#koa" class="headerlink" title="koa"></a><a href=""></a>koa</h1><h4 id="koa介绍"><a href="#koa介绍" class="headerlink" title="koa介绍"></a><a href=""></a>koa介绍</h4><p>  koa是express原班⼈⻢打造的轻量、健壮、富有表现⼒的nodejs框架。⽬前koa有koa1和koa2两个版本；koa2依赖Node.js 7.6.0或者更⾼版本；koa不在内核⽅法中绑定任何中间件，它仅仅是⼀个轻量级的函数库，⼏乎所有功能都必须通过第三⽅插件来实现</p>
<h4 id="koa使用"><a href="#koa使用" class="headerlink" title="koa使用"></a><a href=""></a>koa使用</h4><p>安装：<code>npm install koa</code><br>简单的搭建一个koa服务器<br><img src="https://img-blog.csdnimg.cn/20200327141716166.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h5 id="Application对象"><a href="#Application对象" class="headerlink" title="Application对象"></a><a href=""></a>Application对象</h5><blockquote>
<p> -application是koa的实例化对象，简称为app<br> -app.use()将给定的中间件方法添加到此应用程序，分为异步和同步  异步通过es7中的<code>async</code>和<code>await</code>来处理<br> -app.listen() 来设置服务器端口<br> -app.on()  错误处理</p>
</blockquote>
<h5 id="上下⽂context对象常⽤属性及⽅法"><a href="#上下⽂context对象常⽤属性及⽅法" class="headerlink" title="上下⽂context对象常⽤属性及⽅法"></a><a href=""></a>上下⽂context对象常⽤属性及⽅法</h5><blockquote>
<p> context 将node中的request和response 封装到⼀个对象中，并提供⼀些新的api提供给⽤户进⾏<br>操作；<br>  ctx.app:应⽤程序实例引⽤,等同于app;<br>  ctx.req:Node 的 request 对象.<br>  ctx.res:Node 的 response 对象.<br>  ctx.request:koa中的Request对象；<br>  ctx.response:koa中的response对象；<br>  ctx.state：对象命名空间，通过中间件传递信息；<br>  ctx.throw:抛出错误；<br>  ctx.redirect()重定向<br> ctx.status 获取响应状态<br>  默认情况下， response.status 设置为 404 ⽽不是像 node 的res.statusCode 那样默认为 200 。<br> http状态码：1xx(消息)、2xx(成功)、3xx(重定向)、4xx(请求错误)、5xx和6xx(服务器错误)<br> 常用状态码：<br><img src="https://img-blog.csdnimg.cn/20200327143753419.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<h5 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a><a href=""></a>中间件</h5><blockquote>
<p>Koa 利⽤中间件 控制”上游”，调⽤”下游“<br>koa是包含⼀组中间件函数的对象；可以将app.use⾥的函数理解成中间件<br><img src="https://img-blog.csdnimg.cn/202003271439414.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述">)通过next()将控制转交给另⼀个中间件<br>上述过程也可以通过”洋葱模型“来解释中间件执⾏顺序<br><img src="https://img-blog.csdnimg.cn/20200327144045248.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述">代码：<br><img src="https://img-blog.csdnimg.cn/20200327144446866.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>输出显示：<br><img src="https://img-blog.csdnimg.cn/20200327144530438.png#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<h5 id="koa常用中间件"><a href="#koa常用中间件" class="headerlink" title="koa常用中间件"></a><a href=""></a>koa常用中间件</h5><p>中间件在实际使用中，全都是模块</p>
<blockquote>
<h5 id="koa-router"><a href="#koa-router" class="headerlink" title="koa-router"></a><a href=""></a>koa-router</h5><p>-路由是引导匹配之意，是匹配url到相应处理程序的活动<br>-安装：<code>npm install koa-router -S</code><br>-引入：<code>const Router = require(&quot;koa-router&quot;)</code><br>-实例化：<code>let router = new Router()</code><br><img src="https://img-blog.csdnimg.cn/20200327150022765.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200327150321665.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200327150330659.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<h6 id="koa-static"><a href="#koa-static" class="headerlink" title="koa-static"></a><a href=""></a>koa-static</h6><p>koa-static 是⽤于加载静态资源的中间件，通过它可以加载css、js等静态资源<br>安装：<code>npm install koa-static</code><br>引入：<code>const static = require(&quot;koa-static&quot;)</code><br>使用：<br><img src="https://img-blog.csdnimg.cn/20200327153910767.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<h6 id="koa-views"><a href="#koa-views" class="headerlink" title="koa-views"></a><a href=""></a>koa-views</h6><p>Koa-views⽤于加载html模板⽂件；<br>安装：<code>npm install koa-views -S</code><br>引入：<code>const views = require(&quot;koa-views&quot;)</code><br>使用：<br><img src="https://img-blog.csdnimg.cn/20200327162012593.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">mysql数据库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="数据持久化保存"><a href="#数据持久化保存" class="headerlink" title="数据持久化保存"></a><a href=""></a>数据持久化保存</h2><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a><a href=""></a>服务端</h4><p>数据库：mysql、mongodb、redis、oracle<br>⽂件存储 ：fs</p>
<h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a><a href=""></a>客户端</h4><p>本地缓存 locastorage 、 sessionStorage、cookie…</p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a><a href=""></a>数据库</h2><p>数据库（Database）是按照数据结构来组织、存储和管理数据的仓库。</p>
<blockquote>
<h6 id="进入mysql命令环境"><a href="#进入mysql命令环境" class="headerlink" title="进入mysql命令环境"></a><a href=""></a>进入mysql命令环境</h6><p><code>mysql -u 用户名 -p</code><br><code>Enter Password</code>  输入密码<br><img src="https://img-blog.csdnimg.cn/20200327182318283.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<h6 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a><a href=""></a>数据库操作</h6><p>命令都需要<code>;</code>隔开</p>
<ol>
<li><code>SHOW DATABASES</code> 显示数据库</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200327182410814.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>2.<code>CREATE DATABASE 数据库名</code>  创建数据库<br><img src="https://img-blog.csdnimg.cn/20200327182841852.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>3.<code>SHOW CREATE DATABASE 数据库名</code> 查看数据库信息<br>4.<code>ALTER DATABASE 数据库名 CHARACTER SET = utf8</code>修改数据库编码格式<br>5. <code>DROP DATABASE 数据库名</code> 删除数据库<br>6.<code>quit</code> 退出</p>
</blockquote>
<blockquote>
<h6 id="数据库中的表操作"><a href="#数据库中的表操作" class="headerlink" title="数据库中的表操作"></a><a href=""></a>数据库中的表操作</h6><p>1.<code>USE 数据库名</code>选择数据库<br>2.<code>SELECT DATABASE()</code>查看当前选择的数据库<br>3.<code>CREATE TABLE tablename()</code>创建数据表<br>   <code>CREATE TABLE users(</code><br>    <code>username VARCHAR(20),</code><br>    <code>age TINYINT UNSIGNED,</code><br>    <code>salary FLOAT(8,2) UNSIGNED</code><br>   <code>)</code><br>4.<code>SHOW TABLES</code>查看数据表<br>5.<code>SHOW COLUMNS FROM 表名</code>查看数据表的结构</p>
</blockquote>
<blockquote>
<h6 id="数据库中的数据操作"><a href="#数据库中的数据操作" class="headerlink" title="数据库中的数据操作"></a><a href=""></a>数据库中的数据操作</h6><p>1.添加：<code>INSERT INTO 表名 (字段⼀,字段⼆,字段三) VALUES (&quot;值⼀&quot;,&quot;值⼆&quot;,&quot;值三&quot;)</code><br>2.删除：<code>DELETE FROM 表名 WHERE 条件;</code><br>3.修改：<code>UPDATE 表名 SET 设置的内容 WHERE 条件语句;</code><br>4.查找：<code>SELECT 字段 FROM 表名 WHERE 条件语句;</code><br>5.条件语句：<br>   1)ADN和  2)OR或  3)LIKE<br><img src="https://img-blog.csdnimg.cn/20200403154552162.png" alt="在这里插入图片描述"><br>   4) ORDER BY (DESC/ASC)<br><img src="https://img-blog.csdnimg.cn/20200403154904139.png#pic_center" alt="在这里插入图片描述"><br>   5)LIMIT 限制查询<br><img src="https://img-blog.csdnimg.cn/20200403154729452.png#pic_center" alt="在这里插入图片描述"></p>
<p>   6)JOIN ON  7)AS 别名，将复杂的表明简化<br><img src="https://img-blog.csdnimg.cn/20200403160057726.png#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<h6 id="mysql2模块"><a href="#mysql2模块" class="headerlink" title="mysql2模块"></a><a href=""></a>mysql2模块</h6><p>下载：<code>npm install mysql2</code><br>引入：<code>const mysql = require(&quot;mysql2&quot;)</code><br>使用：<br><img src="https://img-blog.csdnimg.cn/20200327184958606.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>配置完成后，存入这个常量中<br>常量中内置一个query()方法，有两个参数<br>第一个参数数据操作，一般为查询语句；<br>第二个参数为一个回调函数，函数中返回一个错误信息和数据，这个函数会返回一个promise对象<br><img src="https://img-blog.csdnimg.cn/20200327192619230.png#pic_center" alt="在这里插入图片描述"><br>第二种方法： <code>connection.promise().query(1，2)</code><br>参数1数据操作 参数2 添加操作时的具体数据<br>返回一个数组，解构赋值<br><img src="https://img-blog.csdnimg.cn/20200405105716395.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/node.js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/node.js/" class="post-title-link" itemprop="url">node.js</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a><a href=""></a>node.js</h1><h4 id="node介绍"><a href="#node介绍" class="headerlink" title="node介绍"></a><a href=""></a>node介绍</h4><p>  Node.js 诞生于2009年，Node.js采用C++语言编写而成，是 一个Javascript的运行环境。Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境 ，让JavaScript的运行脱离浏览器端，可以使用JavaScript语言 书写服务器端代码。</p>
<h4 id="node安装"><a href="#node安装" class="headerlink" title="node安装"></a><a href=""></a>node安装</h4><p>  <a href="https://nodejs.org">Node.js官网</a>下载稳定版本,node偶数版本为稳定版本，奇数版本为非稳定版本。<br>  指令：node -v 用来检查node是否安装完成和版本号</p>
<h4 id="初步感受"><a href="#初步感受" class="headerlink" title="初步感受"></a><a href=""></a>初步感受</h4><p><img src="https://img-blog.csdnimg.cn/20200320094347637.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"> - Google Chrome 默认非安全端口列表，尽量避免以下端口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1,    &#x2F;&#x2F; tcpmux</span><br><span class="line">7,    &#x2F;&#x2F; echo</span><br><span class="line">9,    &#x2F;&#x2F; discard</span><br><span class="line">11,   &#x2F;&#x2F; systat</span><br><span class="line">13,   &#x2F;&#x2F; daytime</span><br><span class="line">15,   &#x2F;&#x2F; netstat</span><br><span class="line">17,   &#x2F;&#x2F; qotd</span><br><span class="line">19,   &#x2F;&#x2F; chargen</span><br><span class="line">20,   &#x2F;&#x2F; ftp data</span><br><span class="line">21,   &#x2F;&#x2F; ftp access</span><br><span class="line">22,   &#x2F;&#x2F; ssh</span><br><span class="line">23,   &#x2F;&#x2F; telnet</span><br><span class="line">25,   &#x2F;&#x2F; smtp</span><br><span class="line">37,   &#x2F;&#x2F; time</span><br><span class="line">42,   &#x2F;&#x2F; name</span><br><span class="line">43,   &#x2F;&#x2F; nicname</span><br><span class="line">53,   &#x2F;&#x2F; domain</span><br><span class="line">77,   &#x2F;&#x2F; priv-rjs</span><br><span class="line">79,   &#x2F;&#x2F; finger</span><br><span class="line">87,   &#x2F;&#x2F; ttylink</span><br><span class="line">95,   &#x2F;&#x2F; supdup</span><br><span class="line">101,  &#x2F;&#x2F; hostriame</span><br><span class="line">102,  &#x2F;&#x2F; iso-tsap</span><br><span class="line">103,  &#x2F;&#x2F; gppitnp</span><br><span class="line">104,  &#x2F;&#x2F; acr-nema</span><br><span class="line">109,  &#x2F;&#x2F; pop2</span><br><span class="line">110,  &#x2F;&#x2F; pop3</span><br><span class="line">111,  &#x2F;&#x2F; sunrpc</span><br><span class="line">113,  &#x2F;&#x2F; auth</span><br><span class="line">115,  &#x2F;&#x2F; sftp</span><br><span class="line">117,  &#x2F;&#x2F; uucp-path</span><br><span class="line">119,  &#x2F;&#x2F; nntp</span><br><span class="line">123,  &#x2F;&#x2F; NTP</span><br><span class="line">135,  &#x2F;&#x2F; loc-srv &#x2F;epmap</span><br><span class="line">139,  &#x2F;&#x2F; netbios</span><br><span class="line">143,  &#x2F;&#x2F; imap2</span><br><span class="line">179,  &#x2F;&#x2F; BGP</span><br><span class="line">389,  &#x2F;&#x2F; ldap</span><br><span class="line">465,  &#x2F;&#x2F; smtp+ssl</span><br><span class="line">512,  &#x2F;&#x2F; print &#x2F; exec</span><br><span class="line">513,  &#x2F;&#x2F; login</span><br><span class="line">514,  &#x2F;&#x2F; shell</span><br><span class="line">515,  &#x2F;&#x2F; printer</span><br><span class="line">526,  &#x2F;&#x2F; tempo</span><br><span class="line">530,  &#x2F;&#x2F; courier</span><br><span class="line">531,  &#x2F;&#x2F; chat</span><br><span class="line">532,  &#x2F;&#x2F; netnews</span><br><span class="line">540,  &#x2F;&#x2F; uucp</span><br><span class="line">556,  &#x2F;&#x2F; remotefs</span><br><span class="line">563,  &#x2F;&#x2F; nntp+ssl</span><br><span class="line">587,  &#x2F;&#x2F; stmp?</span><br><span class="line">601,  &#x2F;&#x2F; ??</span><br><span class="line">636,  &#x2F;&#x2F; ldap+ssl</span><br><span class="line">993,  &#x2F;&#x2F; ldap+ssl</span><br><span class="line">995,  &#x2F;&#x2F; pop3+ssl</span><br><span class="line">2049, &#x2F;&#x2F; nfs</span><br><span class="line">3659, &#x2F;&#x2F; apple-sasl &#x2F; PasswordServer</span><br><span class="line">4045, &#x2F;&#x2F; lockd</span><br><span class="line">6000, &#x2F;&#x2F; X11</span><br><span class="line">6665, &#x2F;&#x2F; Alternate IRC [Apple addition]</span><br><span class="line">6666, &#x2F;&#x2F; Alternate IRC [Apple addition]</span><br><span class="line">6667, &#x2F;&#x2F; Standard IRC [Apple addition]</span><br><span class="line">6668, &#x2F;&#x2F; Alternate IRC [Apple addition]</span><br><span class="line">6669, &#x2F;&#x2F; Alternate IRC [Apple addition]</span><br></pre></td></tr></table></figure>

<h4 id="nodemon工具"><a href="#nodemon工具" class="headerlink" title="nodemon工具"></a><a href=""></a><mark>nodemon工具</mark></h4><p> 可自动重启node服务<br> 安装:<code>npm i nodemon -g</code></p>
<h4 id="npm包管理器"><a href="#npm包管理器" class="headerlink" title="npm包管理器"></a><a href=""></a><mark>npm包管理器</mark></h4><p> npm包管理器，又叫模块管理器<br> NPM(Node Package Manager)  官网的地址是 <a href="https://www.npmjs.com">npm官网</a><br> 安装完Node.js会自动安装NPM(Node Package Manager)<br> npm常用指令:</p>
<blockquote>
<p>1.<code>npm-version(npm -v)</code>    查看npm版本<br>2.<code>npm init</code>    引导创建一个package.json文件<br>3.<code>npm install(npm i) 模块名</code>安装默认在当前目录，没有node_modules<br> 则会创建文件夹<br> <code>npm install 模块名 -S或--s</code>     写入dependencies<br> <code>npm install 模块名 -D或--save-dev</code> 写入devDependencies<br> <code>npm install 模块名 -g</code>         全局安装(命令行使用)<br> <code>npm install 模块名 @1.0</code>       通过”@”符号安装指定版本模块<br>4.<code>npm uninstall 模块名</code>   卸载模块<br>5.<code>npm root</code>          查看当前包安装的路径<br>6.<code>npm root -g</code>        查看全局安装路径<br>7.<code>npm search</code>         查找<br>8.<code>npm help(-h)</code>        查看npm帮助信息</p>
</blockquote>
<h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a><a href=""></a><mark>package.json</mark></h4><p> <code>.json</code> 配置信息文件<br> <code>package.json</code> 当前模块中的配置信息<br><img src="https://img-blog.csdnimg.cn/20200320100534697.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<blockquote>
<p><code>name</code> 模块名<br><code>version</code> 版本号<br><code>main</code> 主入口，未指定时，默认未<code>index.js</code>文件<br><code>dependencies</code> 运行依赖     如<code>jquery</code><br><code>devDependencies</code> 开发依赖  辅助写代码的工具 <code>sass</code></p>
</blockquote>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a><a href=""></a>模块化</h2><h4 id="为什么会有模块化"><a href="#为什么会有模块化" class="headerlink" title="为什么会有模块化"></a><a href=""></a><mark>为什么会有模块化</mark></h4><p> 在JavaScript发展初期就是为了实现简单的页面交互逻辑，寥寥数语即，如今随着前端代码日益膨胀</p>
<p> 这时候JavaScript作为嵌入式的脚本语言的定位动摇了，JavaScript却没有为组织代码提供任何明显帮助，JavaScript极其简单的代码组织规范不足以驾驭如此庞大规模的代码；</p>
<blockquote>
<ol>
<li>使代码的结构更加清晰，便于后期维护</li>
<li>避免变量污染，每一个模块 都有自己独立的命名空间</li>
<li>可以按需加载, 提升性能</li>
</ol>
</blockquote>
<h2 id="数据的导出和导入"><a href="#数据的导出和导入" class="headerlink" title="数据的导出和导入"></a><a href=""></a>数据的导出和导入</h2><p> <strong>导出</strong></p>
<blockquote>
<p>导出多个：module.exports = {}<br>     接收一个对象，对象中包含多个需要导出的内容(数量不限)<br>导出单个：<br><img src="https://img-blog.csdnimg.cn/20200320103035318.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<p> <strong>导入</strong></p>
<blockquote>
<p>使用变量接收:<code>let obj = require(&quot;&quot;)</code><br>使用解构赋值:<code>let {a,Person} = require(&quot;&quot;)</code></p>
</blockquote>
<h2 id="node模块"><a href="#node模块" class="headerlink" title="node模块"></a><a href=""></a>node模块</h2><p> <strong>模块的导入通过<code>require()</code>实现</strong><br> <strong>自定义模块</strong></p>
<blockquote>
<p>不需要安装，自定义使用，同级目录必须加”./“<br>位置自定义，导入时前缀添加”./“</p>
</blockquote>
<p> <strong>内置模块</strong></p>
<blockquote>
<p>由node自带，直接导入即可使用<br>位置 node_modules<br>导入时，直接写模块名称<br>不需要安装</p>
</blockquote>
<p> <strong>外置模块</strong></p>
<blockquote>
<p>使用npm通过指令，按需安装<br>位置 node_modules<br>导入时，直接写模块名称<br>需要安装</p>
</blockquote>
<h2 id="js模块和js文件的区别"><a href="#js模块和js文件的区别" class="headerlink" title="js模块和js文件的区别"></a><a href=""></a>js模块和js文件的区别</h2><p> <strong>文件:</strong></p>
<blockquote>
<p>1.使用时，script标签引入整体文件<br>2.需要文件名+文件格式<br>3.同级目录下直接写文件名+文件格式即可</p>
</blockquote>
<p> <strong>模块：</strong></p>
<blockquote>
<p>1.使用时，require引入的是模块中导出的部分<br>2.只需要模块名称即可<br>3.同级目录下，路径的前缀必须加”./“</p>
</blockquote>
<h2 id="common-js规范"><a href="#common-js规范" class="headerlink" title="common.js规范"></a><a href=""></a><strong>common.js规范</strong></h2><p>  CommonJS规范的提出，主要是为了弥补JavaScript没有标准的缺陷，已达到像Python、Ruby和Java那样具备开发大型应用的基础能力，而不是停留在开发浏览器端小脚本程序的阶段</p>
<p>CommonJS模块规范主要分为三部分：模块引用、模块定义、模块标识。</p>
<h6 id="CommonJS模块规范的好处"><a href="#CommonJS模块规范的好处" class="headerlink" title="CommonJS模块规范的好处"></a><a href=""></a>CommonJS模块规范的好处</h6><blockquote>
<p>CommonJS模块规范很好地解决变量污染问题，每个模块具有独立空间，互不干扰，命名空间等方案与之相比相形见绌。<br>CommonJS规范定义模块十分简单，接口十分简洁。<br>CommonJS模块规范支持引入和导出功能，这样可以顺畅地连接各个模块，实现彼此间的依赖关系。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/node%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/node%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">node模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="fs模块"><a href="#fs模块" class="headerlink" title="fs模块"></a><a href=""></a>fs模块</h2><p><strong>fs是文件操作内置模块</strong><br><strong>文件操作</strong></p>
<blockquote>
<p><strong>所有文件操作都有同步异步之分，特点是同步操作会带有<code>Sync</code></strong></p>
<p>1.<code>writeFile(参1,参2)</code>/<code>writeFileSync()</code><br> 作用：写入文件<br> 参数1：文件名称,包括文件格式<br> 参数2：文件中，需要写入的内容<br> 参数3：配置对象{ }中的flag属性，a(追加写入)，w(正常写入，默认)写入文件存在时会覆盖<br> 参数4：回调函数，执行完成后，如果执行错误会返回一个错误信息<br>代码：<img src="https://img-blog.csdnimg.cn/20200322112852792.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>2.<code>readFile(参1,参2)</code>/<code>readFileSync()</code><br> 作用：文件读取<br> 参数1：文件名称<br> 参数2：“utf-8”,如果不写此参数，需要将回调函数中的第二个参数用toString()转换，否则无法读取中文<br> 参数3：回调函数，读取完成后，会返回两个参数<br>      错误信息和读取到的信息<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200322113452212.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>3.<code>rename(参1,参2)</code><br> 作用：给文件重命名<br> 参数1：修改之前的文件名及格式<br> 参数2：修改之后的文件名及格式<br> 参数3：回调函数，传入参数，表示是否成功<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322113953625.png#pic_center" alt="在这里插入图片描述"><br>4<code>unlink(参1,参2)</code><br> 作用：删除<br> 参数1：删除的文件<br> 参数2：回调函数<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322114523987.png#pic_center" alt="在这里插入图片描述"><br>5.<code>copyFile(参1,参2)</code><br> 作用：复制文件<br> 参数1：被复制的文件<br> 参数2：复制文件<br> 参数3：回调函数<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322114719873.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200322114816159.png#pic_center" alt="在这里插入图片描述"><br>6.<code>xx.isFile()</code><br>作用：判断目标是否是文件</p>
</blockquote>
<p><strong>目录操作/文件夹操作</strong></p>
<blockquote>
<p>操作目录时，不需要后缀格式<br>1.<code>mkdir(参1，参2)</code><br> 作用：创建目录<br> 参数1：目录名<br> 参数2：回调函数<br> 代码：<br><img src="https://img-blog.csdnimg.cn/2020032211515471.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>2.<code>rename(参1,参2)</code><br> 作用：修改目录名称<br> 参数1：被修改的目录名<br> 参数2：修改后的目录名<br> 参数3：回调函数<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322115617676.png#pic_center" alt="在这里插入图片描述"><br>3.<code>readdir(参1,参2)</code><br> 作用：读取目录<br> 参数1：读取目标<br> 参数2：回调函数(错误信息,读取到的内容)<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322115859876.png#pic_center" alt="在这里插入图片描述"><br>4.<code>rmdir(参1,参2)</code><br> 作用：删除空目录/文件夹<br> 参数1：删除的目标<br> 参数2：回调函数<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322120346758.png#pic_center" alt="在这里插入图片描述"><br>删除非空目录<br>代码：<br><img src="https://img-blog.csdnimg.cn/20200322121827586.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>5.<code>exists(参1,参2)</code><br> 作用：判断文件或文件夹是否存在<br> 参数1：指定内容<br> 参数2：回调函数，参数为一个布尔值<br> 代码：<br><img src="https://img-blog.csdnimg.cn/20200322120914697.png#pic_center" alt="在这里插入图片描述"><br>6.<code>stat(参1,参2)</code><br> 作用：获取文件或文件夹的详细信息<br> 参数1：指定内容<br> 参数2：回调函数<br> 代码：<br><img src="https://img-blog.csdnimg.cn/2020032212132242.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>7.<code>xx.isDirectory()</code><br>作用：判断目标是否是文件夹</p>
</blockquote>
<h2 id="Stream流"><a href="#Stream流" class="headerlink" title="Stream流"></a><a href=""></a>Stream流</h2><p>基于fs模块<br>文件流，会把数据分成64kb的多个小文件，然后进行传输<br>耗时会变长，但是传输稳定，可以避免系统崩溃<br><code>fs.creatReadStream(文件名)</code> 读取数据，用来打开一个刻度的文件流，返回一个js.ReadStream对象<br><code>fs.createWriteStream()</code> 写入数据<br><code>on(&quot;data&quot;,chunk=&gt;{})</code>   数据传输时触发的方法,<code>chunk</code>读取的数据<br><code>on(&quot;end&quot;,()=&gt;{})</code> 数据传输完成后触发的方法</p>
<h2 id="url模块"><a href="#url模块" class="headerlink" title="url模块"></a><a href=""></a>url模块</h2><p>url模块提供了一些实用函数，用于URL的处理与解析<br>引入：<code>let url = require(&quot;url&quot;)</code><br>常用方法：1.<code>url.oarse()</code>字符串类型解析为对象<br>2.<code>url.format()</code> 对象类型转字符串</p>
<h2 id="path模块"><a href="#path模块" class="headerlink" title="path模块"></a><a href=""></a>path模块</h2><p>path模块提供了一些用于处理文件路径的小文件<br>引入：<code>let path = require(&quot;path&quot;)</code><br>常用方法：1.<code>path.extname()</code> 返回路径中文件的后缀名，即路径中最后一个”.”之后的部分<br>       2.<code>path.pare()</code>返回路径字符串的对象<br>       3.<code>path.format()</code>    从对象中返回路径字符串</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/socket/" class="post-title-link" itemprop="url">socket</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="单工通信"><a href="#单工通信" class="headerlink" title="单工通信"></a><a href=""></a>单工通信</h1><p>  所谓单工通信，是指消息只能单方向传输的工作方式<br>  单工通信信道是单向信道，发送端和接收端的身份是固定的，发送端只能发送信息，不能接收信息；接收端只能接收信息，不能发送信息，数据信号仅从一端传送到另一端，即信息流是单方向的</p>
<h3 id="前端轮循"><a href="#前端轮循" class="headerlink" title="前端轮循"></a><a href=""></a>前端轮循</h3><p>前端以ajax的方式来循环定时的获取数据<br>前端轮循环，获取数据<br> 循环ajax请求 ，获取数据<br> 消耗性能，消耗资源，不推荐</p>
<blockquote>
<p>jquery<br>同源策略：协议，域名，端口号都一样<br><code>$.ajax()</code> jquery获取ajax请求<br> <code>url</code> 路由<br> <code>method</code> 提交方式 get post<br> <code>success(){}</code> 请求+响应完成后，执行的方法,固定名称<br> <code>data:{}</code> 传递的数据<br><img src="https://img-blog.csdnimg.cn/20200405111309832.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="SSE-server-send-event-服务器推送数据"><a href="#SSE-server-send-event-服务器推送数据" class="headerlink" title="SSE (server send event) 服务器推送数据"></a><a href=""></a>SSE (server send event) 服务器推送数据</h3><p>  Server-sent events:使⽤server-sent 事件的⽅法,服务器可以在任何时刻向我们的web⻚⾯推送数据和信息.这些被推送进来的信息可以在这个⻚⾯上作为事件+data来处理<br>  服务端设置<br>   设置头部<code>&quot;Content-type&quot;,&quot;text/event-stream&quot;</code><br>  推送数据格式<br>   data: 声明数据开始<br>   \r\n\r\n 标志数据结尾<br><img src="https://img-blog.csdnimg.cn/20200405112008830.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>  前端获取<br><img src="https://img-blog.csdnimg.cn/20200329111938952.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="双工同讯"><a href="#双工同讯" class="headerlink" title="双工同讯"></a><a href=""></a>双工同讯</h1><h3 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a><a href=""></a>websocket</h3><p>WebSocket 是 HTML5 开始提供的⼀种在单个 TCP 连接上进⾏全双⼯通讯的协议<br>websocket基于tcp协议</p>
<blockquote>
<h6 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a><a href=""></a>服务端</h6><p><code>var WebSocketServer = require(&quot;ws&quot;).Server</code><br>创建服务及指定端口号<br> <code>let ws = new WebSocketServer({port:3601})</code><br>连接成功之后<br> <code>ws.on(&quot;connection&quot;,回调函数)</code><br>发送数据到服务端<br> <code>ws.send()</code><br>接收数据<br> <code>ws.onmessage = function(d){d.data即为数据}</code></p>
</blockquote>
<blockquote>
<h6 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a><a href=""></a>客户端</h6><p>同源策略：协议，域名，端口号都一样<br>不同源的情况下需要写全称<br>连接服务器<br> <code>let ws = new WebSocket(&quot;ws://localhost/3601&quot;)</code><br>打开协议<br> <code>ws.open=function(){}</code><br>发送数据到服务端<br> <code>ws.send()</code><br>关闭协议,关闭后不能发送数据<br> <code>ws.close()</code><br>接收数据<br> <code>ws.onmessage = function(d){d.data即为数据}</code><br> <code>ws.addEventListener(&quot;message&quot;,function(){})</code></p>
</blockquote>
<h3 id="socket-io模块"><a href="#socket-io模块" class="headerlink" title="socket.io模块"></a><a href=""></a>socket.io模块</h3><blockquote>
<h6 id="服务端-1"><a href="#服务端-1" class="headerlink" title="服务端"></a><a href=""></a>服务端</h6><p>下载socket.io模块<br><img src="https://img-blog.csdnimg.cn/20200329150709573.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200406104042781.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hCRl9fY2c,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>建立连接：<br> 建立连接会传入一个socket对象,表示当前的连接者<br> <code>io.on(&quot;connection&quot;,(socket)=&gt;{</code><br>    传递数据<br>    <code>socket.emit(1,2)</code>参1自定义事件，参2 传递的数据<br>    把数据发送给除了当前连接者以外的所有连接者<br>    <code>socket.broadcast.emit()</code><br> <code>})</code></p>
</blockquote>
<blockquote>
<h6 id="客户端-1"><a href="#客户端-1" class="headerlink" title="客户端"></a><a href=""></a>客户端</h6><p>引入socket.io.js<br>js位置 下载模块后<code>node_modules/socket.io-client/dist/socket.io.js</code><br><img src="https://img-blog.csdnimg.cn/2020032915163265.png#pic_center" alt="在这里插入图片描述"><br>接收数据：<br> <code>socket.io(参1,参2)</code> 参1是那个自定义的事件，参2回调函数，传入被传递的数据</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/07/cors%E8%B7%A8%E5%9F%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/note/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="javascript.note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/note/2020/06/07/cors%E8%B7%A8%E5%9F%9F/" class="post-title-link" itemprop="url">cors跨域</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-07 10:59:05" itemprop="dateCreated datePublished" datetime="2020-06-07T10:59:05+08:00">2020-06-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CORS跨域设置"><a href="#CORS跨域设置" class="headerlink" title="CORS跨域设置"></a>CORS跨域设置</h1><ul>
<li>CORS(Cross-origin resource sharing)，跨域资源共享，是⼀份浏览器技术的规范，⽤来避开 浏览器的同源策略</li>
<li>简单来说就是解决跨域问题的除了jsonp外的另⼀种⽅法；⽐jsonp更加优雅</li>
</ul>
<ol>
<li>(‘Access-Control-Allow-Origin’, ‘*’) //这个表示任意域名都可以访问，默认不能携带 cookie了。(必须字段)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'http://www.baidu.com'</span>); <span class="comment">//这样写，只有 www.baidu.com 可以访问</span></span><br><span class="line">res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>); <span class="comment">//这个表示任意域名都可以访问。</span></span><br></pre></td></tr></table></figure></li>
<li>Access-Control-Allow-Headers ：设置允许requset设置的头部；<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.header(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild'</span>);</span><br></pre></td></tr></table></figure></li>
<li>Access-Control-Expose-Headers 允许客户端获取的头部key;<blockquote>
<p>(‘Access-Control-Expose-Headers’，’Content-Type, Content-Length, Authorization, Accept, X- Requested-With , yourHeaderFeild’) CORS请求时， XMLHttpRequest 对象的 getResponseHeader() ⽅法只能拿到6个基本字段： CacheControl 、 Content-Language 、 Content-Type、 Expires 、 Last-Modified 、 Pragma 。如果想拿到其 他字段，就必须在 Access-Control-Expose-Headers⾥⾯指定</p>
</blockquote>
</li>
<li>预检请求<blockquote>
<ul>
<li>简单的请求直接发送</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET</span><br><span class="line">HEAD </span><br><span class="line">POST </span><br><span class="line">或者 </span><br><span class="line">content-type </span><br><span class="line">text/plain </span><br><span class="line">multipart/form-data </span><br><span class="line">application/x-www-form-urlencoded</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>预检请求</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT </span><br><span class="line">DELETE </span><br><span class="line">CONNECT </span><br><span class="line">OPTIONS </span><br><span class="line">TRACE </span><br><span class="line">PATCH</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>Access-Control-Max-Age⽤来指定本次预检请求的有效期，单位为秒，在此期间不⽤发出另⼀条 预检请求。(预检请求) <ul>
<li>发送预检请求</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/note/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/note/">1</a><span class="space">&hellip;</span><a class="page-number" href="/note/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/note/page/5/">5</a><a class="page-number" href="/note/page/6/">6</a><a class="extend next" rel="next" href="/note/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/note/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/note/lib/anime.min.js"></script>
  <script src="/note/lib/velocity/velocity.min.js"></script>
  <script src="/note/lib/velocity/velocity.ui.min.js"></script>

<script src="/note/js/utils.js"></script>

<script src="/note/js/motion.js"></script>


<script src="/note/js/schemes/muse.js"></script>


<script src="/note/js/next-boot.js"></script>




  















  

  

</body>
</html>
